<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.4"/>
    <title>src.classes API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Personne">Personne</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Personne.__init__">Personne</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.etat">etat</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.immunodeprime">immunodeprime</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.couleur">couleur</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.medecin">medecin</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.position">position</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.id">id</a>
                        </li>
                        <li>
                                <a class="variable" href="#Personne.cpt_iterations_infection">cpt_iterations_infection</a>
                        </li>
                        <li>
                                <a class="function" href="#Personne.se_deplace">se_deplace</a>
                        </li>
                        <li>
                                <a class="function" href="#Personne.guerir">guerir</a>
                        </li>
                        <li>
                                <a class="function" href="#Personne.mourir">mourir</a>
                        </li>
                        <li>
                                <a class="function" href="#Personne.etre_infecte">etre_infecte</a>
                        </li>
                        <li>
                                <a class="function" href="#Personne.etre_immunise">etre_immunise</a>
                        </li>
                        <li>
                                <a class="function" href="#Personne.etre_en_contact">etre_en_contact</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Maladie">Maladie</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Maladie.__init__">Maladie</a>
                        </li>
                        <li>
                                <a class="variable" href="#Maladie.taux_letalite">taux_letalite</a>
                        </li>
                        <li>
                                <a class="variable" href="#Maladie.distance_infection">distance_infection</a>
                        </li>
                        <li>
                                <a class="variable" href="#Maladie.risque_transmission">risque_transmission</a>
                        </li>
                        <li>
                                <a class="variable" href="#Maladie.immunite_apres_guerison">immunite_apres_guerison</a>
                        </li>
                        <li>
                                <a class="variable" href="#Maladie.temps_guerison">temps_guerison</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Grille">Grille</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Grille.__init__">Grille</a>
                        </li>
                        <li>
                                <a class="variable" href="#Grille.taille_carreau">taille_carreau</a>
                        </li>
                        <li>
                                <a class="variable" href="#Grille.largeur">largeur</a>
                        </li>
                        <li>
                                <a class="variable" href="#Grille.hauteur">hauteur</a>
                        </li>
                        <li>
                                <a class="variable" href="#Grille.nb_colonnes">nb_colonnes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Grille.nb_lignes">nb_lignes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Grille.carreaux">carreaux</a>
                        </li>
                        <li>
                                <a class="function" href="#Grille.coordonnees_carreau">coordonnees_carreau</a>
                        </li>
                        <li>
                                <a class="function" href="#Grille.construire_grille">construire_grille</a>
                        </li>
                        <li>
                                <a class="function" href="#Grille.voisins_de_personne">voisins_de_personne</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Simulation">Simulation</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Simulation.__init__">Simulation</a>
                        </li>
                        <li>
                                <a class="variable" href="#Simulation.nb_personnes">nb_personnes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Simulation.maladie">maladie</a>
                        </li>
                        <li>
                                <a class="variable" href="#Simulation.liste_personnes">liste_personnes</a>
                        </li>
                        <li>
                                <a class="variable" href="#Simulation.df_historique">df_historique</a>
                        </li>
                        <li>
                                <a class="variable" href="#Simulation.iterations">iterations</a>
                        </li>
                        <li>
                                <a class="variable" href="#Simulation.grille">grille</a>
                        </li>
                        <li>
                                <a class="function" href="#Simulation.initialiser_population">initialiser_population</a>
                        </li>
                        <li>
                                <a class="function" href="#Simulation.propager_infection">propager_infection</a>
                        </li>
                        <li>
                                <a class="function" href="#Simulation.mise_a_jour_iteration">mise_a_jour_iteration</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
src<wbr>.classes    </h1>

                
                        <input id="mod-classes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-classes-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">random</span><span class="w"> </span><span class="kn">import</span> <span class="n">uniform</span><span class="p">,</span> <span class="n">sample</span><span class="p">,</span> <span class="n">randint</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Personne</span> <span class="p">:</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">    On commence par implémenter la classe Personne, qui permet de construire chacun des individues de la simulation.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etat</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">couleur</span><span class="o">=</span><span class="s2">&quot;vert&quot;</span><span class="p">,</span> <span class="n">medecin</span><span class="o">=</span><span class="s2">&quot;non&quot;</span><span class="p">,</span> <span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">        La variable état représente l&#39;état de santé de la personne, les valeurs possibles sont : &quot;sain&quot;, &quot;infecte&quot;, &quot;immunise&quot; et &quot;mort&quot;.</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">        Par défaut, les personnes commencent avec un état sain et non malade.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">        Le paramètre immunodéprimé peut valoir la valeur &quot;oui&quot; ou &quot;non&quot;.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="sd">        La couleur correspond à l&#39;état de la personne, on a choisi sain : vert, infecte : orange, mort : rouge et immunise : bleu.</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">        La valeur de medecin est &quot;oui&quot; ou &quot;non&quot;.</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">        La position est représentée par une liste de deux éléments : l&#39;abscisse x en premier et l&#39;ordonnée y en deuxième, donnant donc [x,y].</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">        Nous avons choisi de faire une représentation en 2D.</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">        On met en place un système d&#39;id pour pouvoir identifier chaque personne précisément.</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">        On compte aussi le nombre d&#39;itérations depuis l&#39;infection.</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="n">etat</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">immunodeprime</span> <span class="o">=</span> <span class="n">immunodeprime</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="n">couleur</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">medecin</span> <span class="o">=</span> <span class="n">medecin</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="nb">id</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="n">cpt_iterations_infection</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">se_deplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arrivee</span><span class="p">):</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">        Se_déplace met à jour la nouvelle position d&#39;une personne en vie.</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">!=</span> <span class="s2">&quot;mort&quot;</span><span class="p">):</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">arrivee</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>            
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">guerir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">        Guerir sert à faire repasser une personne infectée à l&#39;état sain si elle a survécu à la maladie.</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;sain&quot;</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;vert&quot;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mourir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">        Mourir fait passer la personne à l&#39;état mort.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;mort&quot;</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;rouge&quot;</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_infecte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">        Etre infecté est appelée lors de l&#39;infection d&#39;une personne pour changer ses attributs.</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;infecte&quot;</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_immunise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">        La méthode etre immunise sera appelée si le fait de guérir d&#39;une maladie rend la personne immunisée.</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;immunise&quot;</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;bleu&quot;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_en_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">distance_infection</span><span class="p">):</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">        La méthode etre en contact permet de clalculer la distance entre deux points, dans notre cas c&#39;est donc la position de deux personnes.</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>        <span class="n">distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;=</span> <span class="n">distance_infection</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>    
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">        Dedans, la variable distance_infection correspond à la distance de propagation de la maladie.</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">        Si la distance entre les personnes est inférieure à la valeur à partir de laquelle une personne peut en contaminer une autre, on retourne True, sinon False, car la personne sera donc trop loin pour être contaminée.</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">        Finalement, __str__ affiche toutes les informations sur une personne.</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Personne n°</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> ; État : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">etat</span><span class="si">}</span><span class="s2"> ; Immunodéprimé :</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">immunodeprime</span><span class="si">}</span><span class="s2"> ; Position : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="si">}</span><span class="s2"> ; Médecin :</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">medecin</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Maladie</span> <span class="p">:</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">    La classe Maladie est la classe contenant toutes les caractéristiques par rapport à la maladie qui va être simulée.</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">    Cette classe n&#39;a pas de méthode car les données sont utilisées dans la classe Simulation, mais il n&#39;y a pas de changement direct de la maladie lors de la simulation.</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taux_letalite</span><span class="p">,</span> <span class="n">distance_infection</span><span class="p">,</span> <span class="n">risque_transmission</span><span class="p">,</span> <span class="n">immunite_apres_guerison</span><span class="p">,</span> <span class="n">temps_guerison</span><span class="p">):</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">        On ajoute en attribut le pourcentage de risque que quelqu&#39;un infecté meurt de la maladie.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">        La distance d&#39;infection correspond à la distance maximale à partir de laquelle une personne peut en infecter une autre.</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">        Le risque transmission correspond au pourcentage de risque que quelqu&#39;un d&#39;infecté en infecte un autre qui serait assez proche pour être infecté.</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">        Sa valeur est donc un entier compris entre 1 et 100, avec 1% un risque très faible de transmission et 100% une transmission permanente.</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">        Immunité représente la possibilité d&#39;être immunisé après avoir été infecté, les valeurs possibles sont donc &quot;oui&quot; et &quot;non&quot;.</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">        Temps guérison représente le nombre d&#39;itérations nécessaires pour être guéri, les valeurs possibles sont 5, 15, 25 et -1.</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">        5 représente une durée courte, 15 une durée moyenne, 25 une durée longue et -1 une durée infinie (on ne guéri jamais de la maladie).</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">taux_letalite</span> <span class="o">=</span> <span class="n">taux_letalite</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">distance_infection</span> <span class="o">=</span> <span class="n">distance_infection</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">risque_transmission</span> <span class="o">=</span> <span class="n">risque_transmission</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">immunite_apres_guerison</span> <span class="o">=</span> <span class="n">immunite_apres_guerison</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">temps_guerison</span> <span class="o">=</span> <span class="n">temps_guerison</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Grille</span><span class="p">:</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">    On implémente une classe qui représente la grille qui nous permet d&#39;optimiser la recherche des voisins d&#39;une personne infectée.</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a><span class="sd">    L&#39;idée de cette classe est venue en remarquant que les recherches de voisins nécessitaient une comparaison avec toutes les autres personnes de la simulation, si l&#39;implémentation était sans approche particulière.</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">    Cependant, cela prend énormément de temps, ce qui impacte la qualité et la fluidité de la simulation.</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">    Pour limiter cet effet, l&#39;approche choisie est cette classe grille, qui partitionne la fenêtre en sous-fenêtres.</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">    L&#39;intérêt est que la largeur d&#39;un carreau de la grille est la même que la distance de propagation, ce qui assure qu&#39;une personne infectéene peut infecter que des gens qui sont dans son carreau ou les 8 autres autour, mais pas plus loin.</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taille_carreau</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">):</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">        Parmi les paramètres il y a la taille des carreaux, qui sont carrés, donc la longueur d&#39;un côté correspond à la longeur de chacun de ses côtés.</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">        Il y a la largeur et la hauteur de la fenêtre, donc ses dimensions.</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">        On calcule le nombre de colonnes et de lignes pour la matrice en fonction des dimensions de la fenêtre et de la taille des carreaux.</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">        On stocke dans carreaux la liste des personnes présentes dedans.</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">largeur</span> <span class="o">=</span> <span class="n">largeur_fenetre</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hauteur</span> <span class="o">=</span> <span class="n">hauteur_fenetre</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">largeur</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hauteur</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span><span class="p">):</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>            <span class="n">ligne</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>            <span class="k">for</span> <span class="n">lig</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span><span class="p">):</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>                <span class="n">ligne</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ligne</span><span class="p">)</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">coordonnees_carreau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">        Cette méthode récupère les coordonnées du carreau dans la grille dans lequel se trouve une personne.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>        <span class="n">carreau_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="n">carreau_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="k">return</span> <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">personnes</span><span class="p">):</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="sd">        Cette méthode construit la grille à partir d&#39;une liste de personnes.</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a><span class="sd">        Comme cette fonction est appelée après la mise à jour des positions des personnes dans la fenêtre, on commence par vider toutes les cases avant de pouvoir remplir.</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">        On place chaque personne dans la bonne case.</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>        <span class="k">for</span> <span class="n">colonne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">:</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>            <span class="k">for</span> <span class="n">carreau</span> <span class="ow">in</span> <span class="n">colonne</span><span class="p">:</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>                <span class="n">carreau</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="n">personnes</span><span class="p">:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>            <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordonnees_carreau</span><span class="p">(</span><span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">[</span><span class="n">carreau_x</span><span class="p">][</span><span class="n">carreau_y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">personne</span><span class="p">)</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">voisins_de_personne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">personne</span><span class="p">):</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a><span class="sd">        On récupère les voisins d&#39;une personne dans son carreau ou les 8 autour.</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">        Ça permet de récupérer les personnes qui seront potentiellement infectées par la personne elle-même infectée.</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">        On commence déjà par récupérer le carreau auquel appartient la personne infectée.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd">        On pense bien à vérifier qu&#39;on reste dans la grille.</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">        Par exemple, si on est dans le carreau tout en haut à droite, il faut bien penser à ne pas sortir de la grille.</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordonnees_carreau</span><span class="p">(</span><span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>        <span class="n">voisins</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>                <span class="n">nouveau_carreau_x</span><span class="p">,</span> <span class="n">nouveau_carreau_y</span> <span class="o">=</span> <span class="n">carreau_x</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">+</span> <span class="n">y</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nouveau_carreau_x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nouveau_carreau_y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span><span class="p">:</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>                    <span class="n">voisins</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">[</span><span class="n">nouveau_carreau_x</span><span class="p">][</span><span class="n">nouveau_carreau_y</span><span class="p">])</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>        <span class="k">return</span> <span class="n">voisins</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Simulation</span> <span class="p">:</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">    On implémente ensuite la classe simulation, qui permet de construire toute la structure pour la simulation.</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maladie</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">,</span> <span class="n">nb_personnes</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">        Nb personnes est le nombre de personnes totales dans la simulation, tout état confondu.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        Maladie est l&#39;objet de classe Maladie que la simulation va répandre.</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        Liste personnes permet de stocker les personnes de la simulation.</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">        On stocke les statistiques qui peuvent servir pour la réalisation des statistiques dans l&#39;attribut df_historique.</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        On fait le stockage directement dans un dataframe pour que ce soit plus simple pour la réalisation des schémas matplotlib; car c&#39;est la structure priviligiée pour ça.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        Iteration est le numéro de l&#39;itération en cours.</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">        Grille est l&#39;objet de classe Grille associé à la simulation.</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span> <span class="o">=</span> <span class="n">nb_personnes</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span> <span class="o">=</span> <span class="n">maladie</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df_historique</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;nb_sains&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_infectes&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_immunises&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_morts&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_total&quot;</span><span class="p">])</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span> <span class="o">=</span> <span class="n">Grille</span><span class="p">(</span><span class="n">taille_carreau</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">distance_infection</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="o">=</span><span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="o">=</span><span class="n">hauteur_fenetre</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialiser_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">,</span> <span class="n">pourcentage_infectes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">pourcentage_immunodeprimes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        On crée les personnes de la simulation et on infecte un échantillon.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        Par défaut, on met le pourcentage de personnes infectées à 5% mais l&#39;utilisateur peut règler cette valeur.</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        Il y a également un indicateur du pourcentage que représentent les personnes immunodéprimées parmi la population.</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">        On va initialiser chaque personne à une position aléatoire dans la fenêtre.</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        On utilise randint pour tirer aléatoirement les chances qu&#39;une personne soit immunodéprimée.</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        Ensuite, on infecte le pourcentage de personnes infectées choisi par la personne.</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        Pour cela, on tire aléatoirement le nombre de personnes qu&#39;il faut.</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span><span class="p">):</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>            <span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">)]</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>            <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">pourcentage_immunodeprimes</span><span class="p">:</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>                <span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">etat</span><span class="o">=</span><span class="s2">&quot;sain&quot;</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="o">=</span><span class="s2">&quot;oui&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>            <span class="k">else</span> <span class="p">:</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>                <span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">etat</span><span class="o">=</span><span class="s2">&quot;sain&quot;</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="o">=</span><span class="s2">&quot;non&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">personne</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>        <span class="n">nb_infectes_initiaux</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span> <span class="o">*</span> <span class="p">(</span><span class="n">pourcentage_infectes</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>        <span class="n">infectes_initiaux</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">,</span> <span class="n">nb_infectes_initiaux</span><span class="p">)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="n">infectes_initiaux</span><span class="p">:</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>            <span class="n">personne</span><span class="o">.</span><span class="n">etre_infecte</span><span class="p">()</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">)</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>    
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">propager_infection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">        On fait la propagation de la maladie aux personnes à côté d&#39;une personne infectée.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">        Pour chaque personne infectée, on récupère ses voisins, donc ceux dans sa case de la grille ou les 8 cas autour.</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">        On regarde si la distance entre les deux points est assez faible pour que la personne puisse être infectée.</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">        Comme la valeur de risque de transmission est un entier entre 1 et 100, on va récupérer une valeur aléatoire.</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">        Si elle est inférieure au pourcentage de risque de transmission, la personne est maintenant infectée.</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>        <span class="n">infectes</span> <span class="o">=</span> <span class="p">[</span><span class="n">personne</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">]</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>        <span class="k">for</span> <span class="n">infecte</span> <span class="ow">in</span> <span class="n">infectes</span><span class="p">:</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>            <span class="n">voisins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">voisins_de_personne</span><span class="p">(</span><span class="n">infecte</span><span class="p">)</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>            <span class="k">for</span> <span class="n">voisin</span> <span class="ow">in</span> <span class="n">voisins</span><span class="p">:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>                <span class="k">if</span> <span class="n">voisin</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;sain&quot;</span><span class="p">:</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>                    <span class="k">if</span> <span class="n">infecte</span><span class="o">.</span><span class="n">etre_en_contact</span><span class="p">(</span><span class="n">voisin</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">distance_infection</span><span class="p">):</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>                        <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">risque_transmission</span><span class="p">:</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>                            <span class="n">voisin</span><span class="o">.</span><span class="n">etre_infecte</span><span class="p">()</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>    
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mise_a_jour_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">        On met à jour après chaque itération.</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">        Actuellement, la mise à jour de la position des personnes, c&#39;est-à-dire leurs mouvements, est aléatoire sans tendance guidée.</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">        Ensuite, on reconstruit la grille avec les nouvelles positions, on propage l’infection et on met à jour les états pour chaque personne.</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">        Pour les calculs, on va estimer que les personnes immunodéprimées ont deux fois plus de chances de mourir.</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        Si la personne n&#39;a pas une maladie permanente et qu&#39;elle a survécu à toutes les itérations nécessaires pour que la maladie passe, la personne est guérie.</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">        Si on est immunisé après la maladie, la personne gagne ce statut, sinon elle est juste saine à nouveau.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        Finalement, on enregistre les statistiques actuelles sous forme de dataframe en calculant le nombre de personnes par état.</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">:</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>            <span class="n">x</span> <span class="o">=</span> <span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>            <span class="n">y</span> <span class="o">=</span> <span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>            <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>            <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">largeur</span> <span class="p">:</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">largeur</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>            <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>                <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>            <span class="k">elif</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">hauteur</span> <span class="p">:</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">hauteur</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="n">personne</span><span class="o">.</span><span class="n">se_deplace</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">)</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">propager_infection</span><span class="p">()</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>            <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">:</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>                <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>                <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>                    <span class="n">risque</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">taux_letalite</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>                    <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">immunodeprime</span> <span class="o">==</span> <span class="s2">&quot;oui&quot;</span><span class="p">:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>                        <span class="n">risque</span> <span class="o">*=</span> <span class="mf">1.5</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>                    <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">risque</span><span class="p">:</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">mourir</span><span class="p">()</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>                        <span class="k">continue</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">temps_guerison</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">temps_guerison</span><span class="p">:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">immunite_apres_guerison</span> <span class="o">==</span> <span class="s2">&quot;oui&quot;</span><span class="p">:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">etre_immunise</span><span class="p">()</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">guerir</span><span class="p">()</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>        <span class="n">nb_sains</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;sain&quot;</span><span class="p">)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>        <span class="n">nb_infectes</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">)</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>        <span class="n">nb_immunises</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;immunise&quot;</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>        <span class="n">nb_morts</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;mort&quot;</span><span class="p">)</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>        <span class="n">nb_total</span> <span class="o">=</span> <span class="n">nb_sains</span> <span class="o">+</span> <span class="n">nb_infectes</span> <span class="o">+</span> <span class="n">nb_immunises</span> <span class="o">+</span> <span class="n">nb_morts</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df_historique</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb_sains</span><span class="p">,</span> <span class="n">nb_infectes</span><span class="p">,</span> <span class="n">nb_immunises</span><span class="p">,</span> <span class="n">nb_morts</span><span class="p">,</span> <span class="n">nb_total</span><span class="p">]</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            </section>
                <section id="Personne">
                            <input id="Personne-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Personne</span>:

                <label class="view-source-button" for="Personne-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne-6"><a href="#Personne-6"><span class="linenos"> 6</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Personne</span> <span class="p">:</span>
</span><span id="Personne-7"><a href="#Personne-7"><span class="linenos"> 7</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-8"><a href="#Personne-8"><span class="linenos"> 8</span></a><span class="sd">    On commence par implémenter la classe Personne, qui permet de construire chacun des individues de la simulation.</span>
</span><span id="Personne-9"><a href="#Personne-9"><span class="linenos"> 9</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Personne-10"><a href="#Personne-10"><span class="linenos">10</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etat</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">couleur</span><span class="o">=</span><span class="s2">&quot;vert&quot;</span><span class="p">,</span> <span class="n">medecin</span><span class="o">=</span><span class="s2">&quot;non&quot;</span><span class="p">,</span> <span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="Personne-11"><a href="#Personne-11"><span class="linenos">11</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-12"><a href="#Personne-12"><span class="linenos">12</span></a><span class="sd">        La variable état représente l&#39;état de santé de la personne, les valeurs possibles sont : &quot;sain&quot;, &quot;infecte&quot;, &quot;immunise&quot; et &quot;mort&quot;.</span>
</span><span id="Personne-13"><a href="#Personne-13"><span class="linenos">13</span></a><span class="sd">        Par défaut, les personnes commencent avec un état sain et non malade.</span>
</span><span id="Personne-14"><a href="#Personne-14"><span class="linenos">14</span></a><span class="sd">        Le paramètre immunodéprimé peut valoir la valeur &quot;oui&quot; ou &quot;non&quot;.</span>
</span><span id="Personne-15"><a href="#Personne-15"><span class="linenos">15</span></a><span class="sd">        La couleur correspond à l&#39;état de la personne, on a choisi sain : vert, infecte : orange, mort : rouge et immunise : bleu.</span>
</span><span id="Personne-16"><a href="#Personne-16"><span class="linenos">16</span></a><span class="sd">        La valeur de medecin est &quot;oui&quot; ou &quot;non&quot;.</span>
</span><span id="Personne-17"><a href="#Personne-17"><span class="linenos">17</span></a><span class="sd">        La position est représentée par une liste de deux éléments : l&#39;abscisse x en premier et l&#39;ordonnée y en deuxième, donnant donc [x,y].</span>
</span><span id="Personne-18"><a href="#Personne-18"><span class="linenos">18</span></a><span class="sd">        Nous avons choisi de faire une représentation en 2D.</span>
</span><span id="Personne-19"><a href="#Personne-19"><span class="linenos">19</span></a><span class="sd">        On met en place un système d&#39;id pour pouvoir identifier chaque personne précisément.</span>
</span><span id="Personne-20"><a href="#Personne-20"><span class="linenos">20</span></a><span class="sd">        On compte aussi le nombre d&#39;itérations depuis l&#39;infection.</span>
</span><span id="Personne-21"><a href="#Personne-21"><span class="linenos">21</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-22"><a href="#Personne-22"><span class="linenos">22</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="n">etat</span>
</span><span id="Personne-23"><a href="#Personne-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">immunodeprime</span> <span class="o">=</span> <span class="n">immunodeprime</span>
</span><span id="Personne-24"><a href="#Personne-24"><span class="linenos">24</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="n">couleur</span>
</span><span id="Personne-25"><a href="#Personne-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">medecin</span> <span class="o">=</span> <span class="n">medecin</span>
</span><span id="Personne-26"><a href="#Personne-26"><span class="linenos">26</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
</span><span id="Personne-27"><a href="#Personne-27"><span class="linenos">27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="nb">id</span>
</span><span id="Personne-28"><a href="#Personne-28"><span class="linenos">28</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="n">cpt_iterations_infection</span>
</span><span id="Personne-29"><a href="#Personne-29"><span class="linenos">29</span></a>
</span><span id="Personne-30"><a href="#Personne-30"><span class="linenos">30</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">se_deplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arrivee</span><span class="p">):</span>
</span><span id="Personne-31"><a href="#Personne-31"><span class="linenos">31</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-32"><a href="#Personne-32"><span class="linenos">32</span></a><span class="sd">        Se_déplace met à jour la nouvelle position d&#39;une personne en vie.</span>
</span><span id="Personne-33"><a href="#Personne-33"><span class="linenos">33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-34"><a href="#Personne-34"><span class="linenos">34</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">!=</span> <span class="s2">&quot;mort&quot;</span><span class="p">):</span>
</span><span id="Personne-35"><a href="#Personne-35"><span class="linenos">35</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">arrivee</span>
</span><span id="Personne-36"><a href="#Personne-36"><span class="linenos">36</span></a>            
</span><span id="Personne-37"><a href="#Personne-37"><span class="linenos">37</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">guerir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne-38"><a href="#Personne-38"><span class="linenos">38</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-39"><a href="#Personne-39"><span class="linenos">39</span></a><span class="sd">        Guerir sert à faire repasser une personne infectée à l&#39;état sain si elle a survécu à la maladie.</span>
</span><span id="Personne-40"><a href="#Personne-40"><span class="linenos">40</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-41"><a href="#Personne-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;sain&quot;</span>
</span><span id="Personne-42"><a href="#Personne-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;vert&quot;</span>
</span><span id="Personne-43"><a href="#Personne-43"><span class="linenos">43</span></a>
</span><span id="Personne-44"><a href="#Personne-44"><span class="linenos">44</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mourir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne-45"><a href="#Personne-45"><span class="linenos">45</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-46"><a href="#Personne-46"><span class="linenos">46</span></a><span class="sd">        Mourir fait passer la personne à l&#39;état mort.</span>
</span><span id="Personne-47"><a href="#Personne-47"><span class="linenos">47</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-48"><a href="#Personne-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;mort&quot;</span>
</span><span id="Personne-49"><a href="#Personne-49"><span class="linenos">49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;rouge&quot;</span>
</span><span id="Personne-50"><a href="#Personne-50"><span class="linenos">50</span></a>
</span><span id="Personne-51"><a href="#Personne-51"><span class="linenos">51</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_infecte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne-52"><a href="#Personne-52"><span class="linenos">52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-53"><a href="#Personne-53"><span class="linenos">53</span></a><span class="sd">        Etre infecté est appelée lors de l&#39;infection d&#39;une personne pour changer ses attributs.</span>
</span><span id="Personne-54"><a href="#Personne-54"><span class="linenos">54</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-55"><a href="#Personne-55"><span class="linenos">55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;infecte&quot;</span>
</span><span id="Personne-56"><a href="#Personne-56"><span class="linenos">56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span>
</span><span id="Personne-57"><a href="#Personne-57"><span class="linenos">57</span></a>
</span><span id="Personne-58"><a href="#Personne-58"><span class="linenos">58</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_immunise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne-59"><a href="#Personne-59"><span class="linenos">59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-60"><a href="#Personne-60"><span class="linenos">60</span></a><span class="sd">        La méthode etre immunise sera appelée si le fait de guérir d&#39;une maladie rend la personne immunisée.</span>
</span><span id="Personne-61"><a href="#Personne-61"><span class="linenos">61</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-62"><a href="#Personne-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;immunise&quot;</span>
</span><span id="Personne-63"><a href="#Personne-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;bleu&quot;</span>
</span><span id="Personne-64"><a href="#Personne-64"><span class="linenos">64</span></a>
</span><span id="Personne-65"><a href="#Personne-65"><span class="linenos">65</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_en_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">distance_infection</span><span class="p">):</span>
</span><span id="Personne-66"><a href="#Personne-66"><span class="linenos">66</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-67"><a href="#Personne-67"><span class="linenos">67</span></a><span class="sd">        La méthode etre en contact permet de clalculer la distance entre deux points, dans notre cas c&#39;est donc la position de deux personnes.</span>
</span><span id="Personne-68"><a href="#Personne-68"><span class="linenos">68</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-69"><a href="#Personne-69"><span class="linenos">69</span></a>        <span class="n">distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="Personne-70"><a href="#Personne-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;=</span> <span class="n">distance_infection</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="Personne-71"><a href="#Personne-71"><span class="linenos">71</span></a>    
</span><span id="Personne-72"><a href="#Personne-72"><span class="linenos">72</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne-73"><a href="#Personne-73"><span class="linenos">73</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne-74"><a href="#Personne-74"><span class="linenos">74</span></a><span class="sd">        Dedans, la variable distance_infection correspond à la distance de propagation de la maladie.</span>
</span><span id="Personne-75"><a href="#Personne-75"><span class="linenos">75</span></a><span class="sd">        Si la distance entre les personnes est inférieure à la valeur à partir de laquelle une personne peut en contaminer une autre, on retourne True, sinon False, car la personne sera donc trop loin pour être contaminée.</span>
</span><span id="Personne-76"><a href="#Personne-76"><span class="linenos">76</span></a><span class="sd">        Finalement, __str__ affiche toutes les informations sur une personne.</span>
</span><span id="Personne-77"><a href="#Personne-77"><span class="linenos">77</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne-78"><a href="#Personne-78"><span class="linenos">78</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Personne n°</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> ; État : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">etat</span><span class="si">}</span><span class="s2"> ; Immunodéprimé :</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">immunodeprime</span><span class="si">}</span><span class="s2"> ; Position : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="si">}</span><span class="s2"> ; Médecin :</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">medecin</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>On commence par implémenter la classe Personne, qui permet de construire chacun des individues de la simulation.</p>
</div>


                            <div id="Personne.__init__" class="classattr">
                                        <input id="Personne.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Personne</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">etat</span>,</span><span class="param">	<span class="n">immunodeprime</span>,</span><span class="param">	<span class="n">position</span>,</span><span class="param">	<span class="nb">id</span><span class="o">=</span><span class="mi">0</span>,</span><span class="param">	<span class="n">couleur</span><span class="o">=</span><span class="s1">&#39;vert&#39;</span>,</span><span class="param">	<span class="n">medecin</span><span class="o">=</span><span class="s1">&#39;non&#39;</span>,</span><span class="param">	<span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="mi">0</span></span>)</span>

                <label class="view-source-button" for="Personne.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.__init__-10"><a href="#Personne.__init__-10"><span class="linenos">10</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">etat</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">couleur</span><span class="o">=</span><span class="s2">&quot;vert&quot;</span><span class="p">,</span> <span class="n">medecin</span><span class="o">=</span><span class="s2">&quot;non&quot;</span><span class="p">,</span> <span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
</span><span id="Personne.__init__-11"><a href="#Personne.__init__-11"><span class="linenos">11</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.__init__-12"><a href="#Personne.__init__-12"><span class="linenos">12</span></a><span class="sd">        La variable état représente l&#39;état de santé de la personne, les valeurs possibles sont : &quot;sain&quot;, &quot;infecte&quot;, &quot;immunise&quot; et &quot;mort&quot;.</span>
</span><span id="Personne.__init__-13"><a href="#Personne.__init__-13"><span class="linenos">13</span></a><span class="sd">        Par défaut, les personnes commencent avec un état sain et non malade.</span>
</span><span id="Personne.__init__-14"><a href="#Personne.__init__-14"><span class="linenos">14</span></a><span class="sd">        Le paramètre immunodéprimé peut valoir la valeur &quot;oui&quot; ou &quot;non&quot;.</span>
</span><span id="Personne.__init__-15"><a href="#Personne.__init__-15"><span class="linenos">15</span></a><span class="sd">        La couleur correspond à l&#39;état de la personne, on a choisi sain : vert, infecte : orange, mort : rouge et immunise : bleu.</span>
</span><span id="Personne.__init__-16"><a href="#Personne.__init__-16"><span class="linenos">16</span></a><span class="sd">        La valeur de medecin est &quot;oui&quot; ou &quot;non&quot;.</span>
</span><span id="Personne.__init__-17"><a href="#Personne.__init__-17"><span class="linenos">17</span></a><span class="sd">        La position est représentée par une liste de deux éléments : l&#39;abscisse x en premier et l&#39;ordonnée y en deuxième, donnant donc [x,y].</span>
</span><span id="Personne.__init__-18"><a href="#Personne.__init__-18"><span class="linenos">18</span></a><span class="sd">        Nous avons choisi de faire une représentation en 2D.</span>
</span><span id="Personne.__init__-19"><a href="#Personne.__init__-19"><span class="linenos">19</span></a><span class="sd">        On met en place un système d&#39;id pour pouvoir identifier chaque personne précisément.</span>
</span><span id="Personne.__init__-20"><a href="#Personne.__init__-20"><span class="linenos">20</span></a><span class="sd">        On compte aussi le nombre d&#39;itérations depuis l&#39;infection.</span>
</span><span id="Personne.__init__-21"><a href="#Personne.__init__-21"><span class="linenos">21</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.__init__-22"><a href="#Personne.__init__-22"><span class="linenos">22</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="n">etat</span>
</span><span id="Personne.__init__-23"><a href="#Personne.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">immunodeprime</span> <span class="o">=</span> <span class="n">immunodeprime</span>
</span><span id="Personne.__init__-24"><a href="#Personne.__init__-24"><span class="linenos">24</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="n">couleur</span>
</span><span id="Personne.__init__-25"><a href="#Personne.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">medecin</span> <span class="o">=</span> <span class="n">medecin</span>
</span><span id="Personne.__init__-26"><a href="#Personne.__init__-26"><span class="linenos">26</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">position</span>
</span><span id="Personne.__init__-27"><a href="#Personne.__init__-27"><span class="linenos">27</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="o">=</span><span class="nb">id</span>
</span><span id="Personne.__init__-28"><a href="#Personne.__init__-28"><span class="linenos">28</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cpt_iterations_infection</span><span class="o">=</span><span class="n">cpt_iterations_infection</span>
</span></pre></div>


            <div class="docstring"><p>La variable état représente l'état de santé de la personne, les valeurs possibles sont : "sain", "infecte", "immunise" et "mort".
Par défaut, les personnes commencent avec un état sain et non malade.
Le paramètre immunodéprimé peut valoir la valeur "oui" ou "non".
La couleur correspond à l'état de la personne, on a choisi sain : vert, infecte : orange, mort : rouge et immunise : bleu.
La valeur de medecin est "oui" ou "non".
La position est représentée par une liste de deux éléments : l'abscisse x en premier et l'ordonnée y en deuxième, donnant donc [x,y].
Nous avons choisi de faire une représentation en 2D.
On met en place un système d'id pour pouvoir identifier chaque personne précisément.
On compte aussi le nombre d'itérations depuis l'infection.</p>
</div>


                            </div>
                            <div id="Personne.etat" class="classattr">
                                <div class="attr variable">
            <span class="name">etat</span>

        
    </div>
    <a class="headerlink" href="#Personne.etat"></a>
    
    

                            </div>
                            <div id="Personne.immunodeprime" class="classattr">
                                <div class="attr variable">
            <span class="name">immunodeprime</span>

        
    </div>
    <a class="headerlink" href="#Personne.immunodeprime"></a>
    
    

                            </div>
                            <div id="Personne.couleur" class="classattr">
                                <div class="attr variable">
            <span class="name">couleur</span>

        
    </div>
    <a class="headerlink" href="#Personne.couleur"></a>
    
    

                            </div>
                            <div id="Personne.medecin" class="classattr">
                                <div class="attr variable">
            <span class="name">medecin</span>

        
    </div>
    <a class="headerlink" href="#Personne.medecin"></a>
    
    

                            </div>
                            <div id="Personne.position" class="classattr">
                                <div class="attr variable">
            <span class="name">position</span>

        
    </div>
    <a class="headerlink" href="#Personne.position"></a>
    
    

                            </div>
                            <div id="Personne.id" class="classattr">
                                <div class="attr variable">
            <span class="name">id</span>

        
    </div>
    <a class="headerlink" href="#Personne.id"></a>
    
    

                            </div>
                            <div id="Personne.cpt_iterations_infection" class="classattr">
                                <div class="attr variable">
            <span class="name">cpt_iterations_infection</span>

        
    </div>
    <a class="headerlink" href="#Personne.cpt_iterations_infection"></a>
    
    

                            </div>
                            <div id="Personne.se_deplace" class="classattr">
                                        <input id="Personne.se_deplace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">se_deplace</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">arrivee</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Personne.se_deplace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.se_deplace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.se_deplace-30"><a href="#Personne.se_deplace-30"><span class="linenos">30</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">se_deplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arrivee</span><span class="p">):</span>
</span><span id="Personne.se_deplace-31"><a href="#Personne.se_deplace-31"><span class="linenos">31</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.se_deplace-32"><a href="#Personne.se_deplace-32"><span class="linenos">32</span></a><span class="sd">        Se_déplace met à jour la nouvelle position d&#39;une personne en vie.</span>
</span><span id="Personne.se_deplace-33"><a href="#Personne.se_deplace-33"><span class="linenos">33</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.se_deplace-34"><a href="#Personne.se_deplace-34"><span class="linenos">34</span></a>        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">!=</span> <span class="s2">&quot;mort&quot;</span><span class="p">):</span>
</span><span id="Personne.se_deplace-35"><a href="#Personne.se_deplace-35"><span class="linenos">35</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">arrivee</span>
</span></pre></div>


            <div class="docstring"><p>Se_déplace met à jour la nouvelle position d'une personne en vie.</p>
</div>


                            </div>
                            <div id="Personne.guerir" class="classattr">
                                        <input id="Personne.guerir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">guerir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Personne.guerir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.guerir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.guerir-37"><a href="#Personne.guerir-37"><span class="linenos">37</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">guerir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne.guerir-38"><a href="#Personne.guerir-38"><span class="linenos">38</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.guerir-39"><a href="#Personne.guerir-39"><span class="linenos">39</span></a><span class="sd">        Guerir sert à faire repasser une personne infectée à l&#39;état sain si elle a survécu à la maladie.</span>
</span><span id="Personne.guerir-40"><a href="#Personne.guerir-40"><span class="linenos">40</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.guerir-41"><a href="#Personne.guerir-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;sain&quot;</span>
</span><span id="Personne.guerir-42"><a href="#Personne.guerir-42"><span class="linenos">42</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;vert&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Guerir sert à faire repasser une personne infectée à l'état sain si elle a survécu à la maladie.</p>
</div>


                            </div>
                            <div id="Personne.mourir" class="classattr">
                                        <input id="Personne.mourir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mourir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Personne.mourir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.mourir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.mourir-44"><a href="#Personne.mourir-44"><span class="linenos">44</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mourir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne.mourir-45"><a href="#Personne.mourir-45"><span class="linenos">45</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.mourir-46"><a href="#Personne.mourir-46"><span class="linenos">46</span></a><span class="sd">        Mourir fait passer la personne à l&#39;état mort.</span>
</span><span id="Personne.mourir-47"><a href="#Personne.mourir-47"><span class="linenos">47</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.mourir-48"><a href="#Personne.mourir-48"><span class="linenos">48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;mort&quot;</span>
</span><span id="Personne.mourir-49"><a href="#Personne.mourir-49"><span class="linenos">49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;rouge&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Mourir fait passer la personne à l'état mort.</p>
</div>


                            </div>
                            <div id="Personne.etre_infecte" class="classattr">
                                        <input id="Personne.etre_infecte-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">etre_infecte</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Personne.etre_infecte-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.etre_infecte"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.etre_infecte-51"><a href="#Personne.etre_infecte-51"><span class="linenos">51</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_infecte</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne.etre_infecte-52"><a href="#Personne.etre_infecte-52"><span class="linenos">52</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.etre_infecte-53"><a href="#Personne.etre_infecte-53"><span class="linenos">53</span></a><span class="sd">        Etre infecté est appelée lors de l&#39;infection d&#39;une personne pour changer ses attributs.</span>
</span><span id="Personne.etre_infecte-54"><a href="#Personne.etre_infecte-54"><span class="linenos">54</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.etre_infecte-55"><a href="#Personne.etre_infecte-55"><span class="linenos">55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;infecte&quot;</span>
</span><span id="Personne.etre_infecte-56"><a href="#Personne.etre_infecte-56"><span class="linenos">56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;orange&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Etre infecté est appelée lors de l'infection d'une personne pour changer ses attributs.</p>
</div>


                            </div>
                            <div id="Personne.etre_immunise" class="classattr">
                                        <input id="Personne.etre_immunise-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">etre_immunise</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Personne.etre_immunise-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.etre_immunise"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.etre_immunise-58"><a href="#Personne.etre_immunise-58"><span class="linenos">58</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_immunise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Personne.etre_immunise-59"><a href="#Personne.etre_immunise-59"><span class="linenos">59</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.etre_immunise-60"><a href="#Personne.etre_immunise-60"><span class="linenos">60</span></a><span class="sd">        La méthode etre immunise sera appelée si le fait de guérir d&#39;une maladie rend la personne immunisée.</span>
</span><span id="Personne.etre_immunise-61"><a href="#Personne.etre_immunise-61"><span class="linenos">61</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.etre_immunise-62"><a href="#Personne.etre_immunise-62"><span class="linenos">62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">etat</span> <span class="o">=</span> <span class="s2">&quot;immunise&quot;</span>
</span><span id="Personne.etre_immunise-63"><a href="#Personne.etre_immunise-63"><span class="linenos">63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">couleur</span> <span class="o">=</span> <span class="s2">&quot;bleu&quot;</span>
</span></pre></div>


            <div class="docstring"><p>La méthode etre immunise sera appelée si le fait de guérir d'une maladie rend la personne immunisée.</p>
</div>


                            </div>
                            <div id="Personne.etre_en_contact" class="classattr">
                                        <input id="Personne.etre_en_contact-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">etre_en_contact</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">position</span>, </span><span class="param"><span class="n">distance_infection</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Personne.etre_en_contact-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Personne.etre_en_contact"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Personne.etre_en_contact-65"><a href="#Personne.etre_en_contact-65"><span class="linenos">65</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">etre_en_contact</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">distance_infection</span><span class="p">):</span>
</span><span id="Personne.etre_en_contact-66"><a href="#Personne.etre_en_contact-66"><span class="linenos">66</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Personne.etre_en_contact-67"><a href="#Personne.etre_en_contact-67"><span class="linenos">67</span></a><span class="sd">        La méthode etre en contact permet de clalculer la distance entre deux points, dans notre cas c&#39;est donc la position de deux personnes.</span>
</span><span id="Personne.etre_en_contact-68"><a href="#Personne.etre_en_contact-68"><span class="linenos">68</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Personne.etre_en_contact-69"><a href="#Personne.etre_en_contact-69"><span class="linenos">69</span></a>        <span class="n">distance</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
</span><span id="Personne.etre_en_contact-70"><a href="#Personne.etre_en_contact-70"><span class="linenos">70</span></a>        <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">distance</span> <span class="o">&lt;=</span> <span class="n">distance_infection</span> <span class="k">else</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>La méthode etre en contact permet de clalculer la distance entre deux points, dans notre cas c'est donc la position de deux personnes.</p>
</div>


                            </div>
                </section>
                <section id="Maladie">
                            <input id="Maladie-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Maladie</span>:

                <label class="view-source-button" for="Maladie-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Maladie"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Maladie-80"><a href="#Maladie-80"><span class="linenos">80</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Maladie</span> <span class="p">:</span>
</span><span id="Maladie-81"><a href="#Maladie-81"><span class="linenos">81</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Maladie-82"><a href="#Maladie-82"><span class="linenos">82</span></a><span class="sd">    La classe Maladie est la classe contenant toutes les caractéristiques par rapport à la maladie qui va être simulée.</span>
</span><span id="Maladie-83"><a href="#Maladie-83"><span class="linenos">83</span></a><span class="sd">    Cette classe n&#39;a pas de méthode car les données sont utilisées dans la classe Simulation, mais il n&#39;y a pas de changement direct de la maladie lors de la simulation.</span>
</span><span id="Maladie-84"><a href="#Maladie-84"><span class="linenos">84</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Maladie-85"><a href="#Maladie-85"><span class="linenos">85</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taux_letalite</span><span class="p">,</span> <span class="n">distance_infection</span><span class="p">,</span> <span class="n">risque_transmission</span><span class="p">,</span> <span class="n">immunite_apres_guerison</span><span class="p">,</span> <span class="n">temps_guerison</span><span class="p">):</span>
</span><span id="Maladie-86"><a href="#Maladie-86"><span class="linenos">86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Maladie-87"><a href="#Maladie-87"><span class="linenos">87</span></a><span class="sd">        On ajoute en attribut le pourcentage de risque que quelqu&#39;un infecté meurt de la maladie.</span>
</span><span id="Maladie-88"><a href="#Maladie-88"><span class="linenos">88</span></a><span class="sd">        La distance d&#39;infection correspond à la distance maximale à partir de laquelle une personne peut en infecter une autre.</span>
</span><span id="Maladie-89"><a href="#Maladie-89"><span class="linenos">89</span></a><span class="sd">        Le risque transmission correspond au pourcentage de risque que quelqu&#39;un d&#39;infecté en infecte un autre qui serait assez proche pour être infecté.</span>
</span><span id="Maladie-90"><a href="#Maladie-90"><span class="linenos">90</span></a><span class="sd">        Sa valeur est donc un entier compris entre 1 et 100, avec 1% un risque très faible de transmission et 100% une transmission permanente.</span>
</span><span id="Maladie-91"><a href="#Maladie-91"><span class="linenos">91</span></a><span class="sd">        Immunité représente la possibilité d&#39;être immunisé après avoir été infecté, les valeurs possibles sont donc &quot;oui&quot; et &quot;non&quot;.</span>
</span><span id="Maladie-92"><a href="#Maladie-92"><span class="linenos">92</span></a><span class="sd">        Temps guérison représente le nombre d&#39;itérations nécessaires pour être guéri, les valeurs possibles sont 5, 15, 25 et -1.</span>
</span><span id="Maladie-93"><a href="#Maladie-93"><span class="linenos">93</span></a><span class="sd">        5 représente une durée courte, 15 une durée moyenne, 25 une durée longue et -1 une durée infinie (on ne guéri jamais de la maladie).</span>
</span><span id="Maladie-94"><a href="#Maladie-94"><span class="linenos">94</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Maladie-95"><a href="#Maladie-95"><span class="linenos">95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">taux_letalite</span> <span class="o">=</span> <span class="n">taux_letalite</span>
</span><span id="Maladie-96"><a href="#Maladie-96"><span class="linenos">96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">distance_infection</span> <span class="o">=</span> <span class="n">distance_infection</span>
</span><span id="Maladie-97"><a href="#Maladie-97"><span class="linenos">97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">risque_transmission</span> <span class="o">=</span> <span class="n">risque_transmission</span>
</span><span id="Maladie-98"><a href="#Maladie-98"><span class="linenos">98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">immunite_apres_guerison</span> <span class="o">=</span> <span class="n">immunite_apres_guerison</span>
</span><span id="Maladie-99"><a href="#Maladie-99"><span class="linenos">99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">temps_guerison</span> <span class="o">=</span> <span class="n">temps_guerison</span>
</span></pre></div>


            <div class="docstring"><p>La classe Maladie est la classe contenant toutes les caractéristiques par rapport à la maladie qui va être simulée.
Cette classe n'a pas de méthode car les données sont utilisées dans la classe Simulation, mais il n'y a pas de changement direct de la maladie lors de la simulation.</p>
</div>


                            <div id="Maladie.__init__" class="classattr">
                                        <input id="Maladie.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Maladie</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">taux_letalite</span>,</span><span class="param">	<span class="n">distance_infection</span>,</span><span class="param">	<span class="n">risque_transmission</span>,</span><span class="param">	<span class="n">immunite_apres_guerison</span>,</span><span class="param">	<span class="n">temps_guerison</span></span>)</span>

                <label class="view-source-button" for="Maladie.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Maladie.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Maladie.__init__-85"><a href="#Maladie.__init__-85"><span class="linenos">85</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taux_letalite</span><span class="p">,</span> <span class="n">distance_infection</span><span class="p">,</span> <span class="n">risque_transmission</span><span class="p">,</span> <span class="n">immunite_apres_guerison</span><span class="p">,</span> <span class="n">temps_guerison</span><span class="p">):</span>
</span><span id="Maladie.__init__-86"><a href="#Maladie.__init__-86"><span class="linenos">86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Maladie.__init__-87"><a href="#Maladie.__init__-87"><span class="linenos">87</span></a><span class="sd">        On ajoute en attribut le pourcentage de risque que quelqu&#39;un infecté meurt de la maladie.</span>
</span><span id="Maladie.__init__-88"><a href="#Maladie.__init__-88"><span class="linenos">88</span></a><span class="sd">        La distance d&#39;infection correspond à la distance maximale à partir de laquelle une personne peut en infecter une autre.</span>
</span><span id="Maladie.__init__-89"><a href="#Maladie.__init__-89"><span class="linenos">89</span></a><span class="sd">        Le risque transmission correspond au pourcentage de risque que quelqu&#39;un d&#39;infecté en infecte un autre qui serait assez proche pour être infecté.</span>
</span><span id="Maladie.__init__-90"><a href="#Maladie.__init__-90"><span class="linenos">90</span></a><span class="sd">        Sa valeur est donc un entier compris entre 1 et 100, avec 1% un risque très faible de transmission et 100% une transmission permanente.</span>
</span><span id="Maladie.__init__-91"><a href="#Maladie.__init__-91"><span class="linenos">91</span></a><span class="sd">        Immunité représente la possibilité d&#39;être immunisé après avoir été infecté, les valeurs possibles sont donc &quot;oui&quot; et &quot;non&quot;.</span>
</span><span id="Maladie.__init__-92"><a href="#Maladie.__init__-92"><span class="linenos">92</span></a><span class="sd">        Temps guérison représente le nombre d&#39;itérations nécessaires pour être guéri, les valeurs possibles sont 5, 15, 25 et -1.</span>
</span><span id="Maladie.__init__-93"><a href="#Maladie.__init__-93"><span class="linenos">93</span></a><span class="sd">        5 représente une durée courte, 15 une durée moyenne, 25 une durée longue et -1 une durée infinie (on ne guéri jamais de la maladie).</span>
</span><span id="Maladie.__init__-94"><a href="#Maladie.__init__-94"><span class="linenos">94</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Maladie.__init__-95"><a href="#Maladie.__init__-95"><span class="linenos">95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">taux_letalite</span> <span class="o">=</span> <span class="n">taux_letalite</span>
</span><span id="Maladie.__init__-96"><a href="#Maladie.__init__-96"><span class="linenos">96</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">distance_infection</span> <span class="o">=</span> <span class="n">distance_infection</span>
</span><span id="Maladie.__init__-97"><a href="#Maladie.__init__-97"><span class="linenos">97</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">risque_transmission</span> <span class="o">=</span> <span class="n">risque_transmission</span>
</span><span id="Maladie.__init__-98"><a href="#Maladie.__init__-98"><span class="linenos">98</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">immunite_apres_guerison</span> <span class="o">=</span> <span class="n">immunite_apres_guerison</span>
</span><span id="Maladie.__init__-99"><a href="#Maladie.__init__-99"><span class="linenos">99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">temps_guerison</span> <span class="o">=</span> <span class="n">temps_guerison</span>
</span></pre></div>


            <div class="docstring"><p>On ajoute en attribut le pourcentage de risque que quelqu'un infecté meurt de la maladie.
La distance d'infection correspond à la distance maximale à partir de laquelle une personne peut en infecter une autre.
Le risque transmission correspond au pourcentage de risque que quelqu'un d'infecté en infecte un autre qui serait assez proche pour être infecté.
Sa valeur est donc un entier compris entre 1 et 100, avec 1% un risque très faible de transmission et 100% une transmission permanente.
Immunité représente la possibilité d'être immunisé après avoir été infecté, les valeurs possibles sont donc "oui" et "non".
Temps guérison représente le nombre d'itérations nécessaires pour être guéri, les valeurs possibles sont 5, 15, 25 et -1.
5 représente une durée courte, 15 une durée moyenne, 25 une durée longue et -1 une durée infinie (on ne guéri jamais de la maladie).</p>
</div>


                            </div>
                            <div id="Maladie.taux_letalite" class="classattr">
                                <div class="attr variable">
            <span class="name">taux_letalite</span>

        
    </div>
    <a class="headerlink" href="#Maladie.taux_letalite"></a>
    
    

                            </div>
                            <div id="Maladie.distance_infection" class="classattr">
                                <div class="attr variable">
            <span class="name">distance_infection</span>

        
    </div>
    <a class="headerlink" href="#Maladie.distance_infection"></a>
    
    

                            </div>
                            <div id="Maladie.risque_transmission" class="classattr">
                                <div class="attr variable">
            <span class="name">risque_transmission</span>

        
    </div>
    <a class="headerlink" href="#Maladie.risque_transmission"></a>
    
    

                            </div>
                            <div id="Maladie.immunite_apres_guerison" class="classattr">
                                <div class="attr variable">
            <span class="name">immunite_apres_guerison</span>

        
    </div>
    <a class="headerlink" href="#Maladie.immunite_apres_guerison"></a>
    
    

                            </div>
                            <div id="Maladie.temps_guerison" class="classattr">
                                <div class="attr variable">
            <span class="name">temps_guerison</span>

        
    </div>
    <a class="headerlink" href="#Maladie.temps_guerison"></a>
    
    

                            </div>
                </section>
                <section id="Grille">
                            <input id="Grille-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Grille</span>:

                <label class="view-source-button" for="Grille-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Grille"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Grille-101"><a href="#Grille-101"><span class="linenos">101</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Grille</span><span class="p">:</span>
</span><span id="Grille-102"><a href="#Grille-102"><span class="linenos">102</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille-103"><a href="#Grille-103"><span class="linenos">103</span></a><span class="sd">    On implémente une classe qui représente la grille qui nous permet d&#39;optimiser la recherche des voisins d&#39;une personne infectée.</span>
</span><span id="Grille-104"><a href="#Grille-104"><span class="linenos">104</span></a><span class="sd">    L&#39;idée de cette classe est venue en remarquant que les recherches de voisins nécessitaient une comparaison avec toutes les autres personnes de la simulation, si l&#39;implémentation était sans approche particulière.</span>
</span><span id="Grille-105"><a href="#Grille-105"><span class="linenos">105</span></a><span class="sd">    Cependant, cela prend énormément de temps, ce qui impacte la qualité et la fluidité de la simulation.</span>
</span><span id="Grille-106"><a href="#Grille-106"><span class="linenos">106</span></a><span class="sd">    Pour limiter cet effet, l&#39;approche choisie est cette classe grille, qui partitionne la fenêtre en sous-fenêtres.</span>
</span><span id="Grille-107"><a href="#Grille-107"><span class="linenos">107</span></a><span class="sd">    L&#39;intérêt est que la largeur d&#39;un carreau de la grille est la même que la distance de propagation, ce qui assure qu&#39;une personne infectéene peut infecter que des gens qui sont dans son carreau ou les 8 autres autour, mais pas plus loin.</span>
</span><span id="Grille-108"><a href="#Grille-108"><span class="linenos">108</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Grille-109"><a href="#Grille-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taille_carreau</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">):</span>
</span><span id="Grille-110"><a href="#Grille-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille-111"><a href="#Grille-111"><span class="linenos">111</span></a><span class="sd">        Parmi les paramètres il y a la taille des carreaux, qui sont carrés, donc la longueur d&#39;un côté correspond à la longeur de chacun de ses côtés.</span>
</span><span id="Grille-112"><a href="#Grille-112"><span class="linenos">112</span></a><span class="sd">        Il y a la largeur et la hauteur de la fenêtre, donc ses dimensions.</span>
</span><span id="Grille-113"><a href="#Grille-113"><span class="linenos">113</span></a><span class="sd">        On calcule le nombre de colonnes et de lignes pour la matrice en fonction des dimensions de la fenêtre et de la taille des carreaux.</span>
</span><span id="Grille-114"><a href="#Grille-114"><span class="linenos">114</span></a><span class="sd">        On stocke dans carreaux la liste des personnes présentes dedans.</span>
</span><span id="Grille-115"><a href="#Grille-115"><span class="linenos">115</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille-116"><a href="#Grille-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="Grille-117"><a href="#Grille-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">largeur</span> <span class="o">=</span> <span class="n">largeur_fenetre</span>
</span><span id="Grille-118"><a href="#Grille-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hauteur</span> <span class="o">=</span> <span class="n">hauteur_fenetre</span>
</span><span id="Grille-119"><a href="#Grille-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">largeur</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="Grille-120"><a href="#Grille-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hauteur</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="Grille-121"><a href="#Grille-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Grille-122"><a href="#Grille-122"><span class="linenos">122</span></a>        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span><span class="p">):</span>
</span><span id="Grille-123"><a href="#Grille-123"><span class="linenos">123</span></a>            <span class="n">ligne</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Grille-124"><a href="#Grille-124"><span class="linenos">124</span></a>            <span class="k">for</span> <span class="n">lig</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span><span class="p">):</span>
</span><span id="Grille-125"><a href="#Grille-125"><span class="linenos">125</span></a>                <span class="n">ligne</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="Grille-126"><a href="#Grille-126"><span class="linenos">126</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ligne</span><span class="p">)</span>
</span><span id="Grille-127"><a href="#Grille-127"><span class="linenos">127</span></a>
</span><span id="Grille-128"><a href="#Grille-128"><span class="linenos">128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">coordonnees_carreau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
</span><span id="Grille-129"><a href="#Grille-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille-130"><a href="#Grille-130"><span class="linenos">130</span></a><span class="sd">        Cette méthode récupère les coordonnées du carreau dans la grille dans lequel se trouve une personne.</span>
</span><span id="Grille-131"><a href="#Grille-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille-132"><a href="#Grille-132"><span class="linenos">132</span></a>        <span class="n">carreau_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="Grille-133"><a href="#Grille-133"><span class="linenos">133</span></a>        <span class="n">carreau_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="Grille-134"><a href="#Grille-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span>
</span><span id="Grille-135"><a href="#Grille-135"><span class="linenos">135</span></a>
</span><span id="Grille-136"><a href="#Grille-136"><span class="linenos">136</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">personnes</span><span class="p">):</span>
</span><span id="Grille-137"><a href="#Grille-137"><span class="linenos">137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille-138"><a href="#Grille-138"><span class="linenos">138</span></a><span class="sd">        Cette méthode construit la grille à partir d&#39;une liste de personnes.</span>
</span><span id="Grille-139"><a href="#Grille-139"><span class="linenos">139</span></a><span class="sd">        Comme cette fonction est appelée après la mise à jour des positions des personnes dans la fenêtre, on commence par vider toutes les cases avant de pouvoir remplir.</span>
</span><span id="Grille-140"><a href="#Grille-140"><span class="linenos">140</span></a><span class="sd">        On place chaque personne dans la bonne case.</span>
</span><span id="Grille-141"><a href="#Grille-141"><span class="linenos">141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille-142"><a href="#Grille-142"><span class="linenos">142</span></a>        <span class="k">for</span> <span class="n">colonne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">:</span>
</span><span id="Grille-143"><a href="#Grille-143"><span class="linenos">143</span></a>            <span class="k">for</span> <span class="n">carreau</span> <span class="ow">in</span> <span class="n">colonne</span><span class="p">:</span>
</span><span id="Grille-144"><a href="#Grille-144"><span class="linenos">144</span></a>                <span class="n">carreau</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="Grille-145"><a href="#Grille-145"><span class="linenos">145</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="n">personnes</span><span class="p">:</span>
</span><span id="Grille-146"><a href="#Grille-146"><span class="linenos">146</span></a>            <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordonnees_carreau</span><span class="p">(</span><span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
</span><span id="Grille-147"><a href="#Grille-147"><span class="linenos">147</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">[</span><span class="n">carreau_x</span><span class="p">][</span><span class="n">carreau_y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">personne</span><span class="p">)</span>
</span><span id="Grille-148"><a href="#Grille-148"><span class="linenos">148</span></a>
</span><span id="Grille-149"><a href="#Grille-149"><span class="linenos">149</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">voisins_de_personne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">personne</span><span class="p">):</span>
</span><span id="Grille-150"><a href="#Grille-150"><span class="linenos">150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille-151"><a href="#Grille-151"><span class="linenos">151</span></a><span class="sd">        On récupère les voisins d&#39;une personne dans son carreau ou les 8 autour.</span>
</span><span id="Grille-152"><a href="#Grille-152"><span class="linenos">152</span></a><span class="sd">        Ça permet de récupérer les personnes qui seront potentiellement infectées par la personne elle-même infectée.</span>
</span><span id="Grille-153"><a href="#Grille-153"><span class="linenos">153</span></a><span class="sd">        On commence déjà par récupérer le carreau auquel appartient la personne infectée.</span>
</span><span id="Grille-154"><a href="#Grille-154"><span class="linenos">154</span></a><span class="sd">        On pense bien à vérifier qu&#39;on reste dans la grille.</span>
</span><span id="Grille-155"><a href="#Grille-155"><span class="linenos">155</span></a><span class="sd">        Par exemple, si on est dans le carreau tout en haut à droite, il faut bien penser à ne pas sortir de la grille.</span>
</span><span id="Grille-156"><a href="#Grille-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille-157"><a href="#Grille-157"><span class="linenos">157</span></a>        <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordonnees_carreau</span><span class="p">(</span><span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
</span><span id="Grille-158"><a href="#Grille-158"><span class="linenos">158</span></a>        <span class="n">voisins</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Grille-159"><a href="#Grille-159"><span class="linenos">159</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Grille-160"><a href="#Grille-160"><span class="linenos">160</span></a>            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Grille-161"><a href="#Grille-161"><span class="linenos">161</span></a>                <span class="n">nouveau_carreau_x</span><span class="p">,</span> <span class="n">nouveau_carreau_y</span> <span class="o">=</span> <span class="n">carreau_x</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">+</span> <span class="n">y</span>
</span><span id="Grille-162"><a href="#Grille-162"><span class="linenos">162</span></a>                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nouveau_carreau_x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nouveau_carreau_y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span><span class="p">:</span>
</span><span id="Grille-163"><a href="#Grille-163"><span class="linenos">163</span></a>                    <span class="n">voisins</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">[</span><span class="n">nouveau_carreau_x</span><span class="p">][</span><span class="n">nouveau_carreau_y</span><span class="p">])</span>
</span><span id="Grille-164"><a href="#Grille-164"><span class="linenos">164</span></a>        <span class="k">return</span> <span class="n">voisins</span>
</span></pre></div>


            <div class="docstring"><p>On implémente une classe qui représente la grille qui nous permet d'optimiser la recherche des voisins d'une personne infectée.
L'idée de cette classe est venue en remarquant que les recherches de voisins nécessitaient une comparaison avec toutes les autres personnes de la simulation, si l'implémentation était sans approche particulière.
Cependant, cela prend énormément de temps, ce qui impacte la qualité et la fluidité de la simulation.
Pour limiter cet effet, l'approche choisie est cette classe grille, qui partitionne la fenêtre en sous-fenêtres.
L'intérêt est que la largeur d'un carreau de la grille est la même que la distance de propagation, ce qui assure qu'une personne infectéene peut infecter que des gens qui sont dans son carreau ou les 8 autres autour, mais pas plus loin.</p>
</div>


                            <div id="Grille.__init__" class="classattr">
                                        <input id="Grille.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Grille</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">taille_carreau</span>, </span><span class="param"><span class="n">largeur_fenetre</span>, </span><span class="param"><span class="n">hauteur_fenetre</span></span>)</span>

                <label class="view-source-button" for="Grille.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Grille.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Grille.__init__-109"><a href="#Grille.__init__-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taille_carreau</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">):</span>
</span><span id="Grille.__init__-110"><a href="#Grille.__init__-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille.__init__-111"><a href="#Grille.__init__-111"><span class="linenos">111</span></a><span class="sd">        Parmi les paramètres il y a la taille des carreaux, qui sont carrés, donc la longueur d&#39;un côté correspond à la longeur de chacun de ses côtés.</span>
</span><span id="Grille.__init__-112"><a href="#Grille.__init__-112"><span class="linenos">112</span></a><span class="sd">        Il y a la largeur et la hauteur de la fenêtre, donc ses dimensions.</span>
</span><span id="Grille.__init__-113"><a href="#Grille.__init__-113"><span class="linenos">113</span></a><span class="sd">        On calcule le nombre de colonnes et de lignes pour la matrice en fonction des dimensions de la fenêtre et de la taille des carreaux.</span>
</span><span id="Grille.__init__-114"><a href="#Grille.__init__-114"><span class="linenos">114</span></a><span class="sd">        On stocke dans carreaux la liste des personnes présentes dedans.</span>
</span><span id="Grille.__init__-115"><a href="#Grille.__init__-115"><span class="linenos">115</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille.__init__-116"><a href="#Grille.__init__-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="Grille.__init__-117"><a href="#Grille.__init__-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">largeur</span> <span class="o">=</span> <span class="n">largeur_fenetre</span>
</span><span id="Grille.__init__-118"><a href="#Grille.__init__-118"><span class="linenos">118</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hauteur</span> <span class="o">=</span> <span class="n">hauteur_fenetre</span>
</span><span id="Grille.__init__-119"><a href="#Grille.__init__-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">largeur</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="Grille.__init__-120"><a href="#Grille.__init__-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hauteur</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="Grille.__init__-121"><a href="#Grille.__init__-121"><span class="linenos">121</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Grille.__init__-122"><a href="#Grille.__init__-122"><span class="linenos">122</span></a>        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span><span class="p">):</span>
</span><span id="Grille.__init__-123"><a href="#Grille.__init__-123"><span class="linenos">123</span></a>            <span class="n">ligne</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Grille.__init__-124"><a href="#Grille.__init__-124"><span class="linenos">124</span></a>            <span class="k">for</span> <span class="n">lig</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span><span class="p">):</span>
</span><span id="Grille.__init__-125"><a href="#Grille.__init__-125"><span class="linenos">125</span></a>                <span class="n">ligne</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
</span><span id="Grille.__init__-126"><a href="#Grille.__init__-126"><span class="linenos">126</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ligne</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Parmi les paramètres il y a la taille des carreaux, qui sont carrés, donc la longueur d'un côté correspond à la longeur de chacun de ses côtés.
Il y a la largeur et la hauteur de la fenêtre, donc ses dimensions.
On calcule le nombre de colonnes et de lignes pour la matrice en fonction des dimensions de la fenêtre et de la taille des carreaux.
On stocke dans carreaux la liste des personnes présentes dedans.</p>
</div>


                            </div>
                            <div id="Grille.taille_carreau" class="classattr">
                                <div class="attr variable">
            <span class="name">taille_carreau</span>

        
    </div>
    <a class="headerlink" href="#Grille.taille_carreau"></a>
    
    

                            </div>
                            <div id="Grille.largeur" class="classattr">
                                <div class="attr variable">
            <span class="name">largeur</span>

        
    </div>
    <a class="headerlink" href="#Grille.largeur"></a>
    
    

                            </div>
                            <div id="Grille.hauteur" class="classattr">
                                <div class="attr variable">
            <span class="name">hauteur</span>

        
    </div>
    <a class="headerlink" href="#Grille.hauteur"></a>
    
    

                            </div>
                            <div id="Grille.nb_colonnes" class="classattr">
                                <div class="attr variable">
            <span class="name">nb_colonnes</span>

        
    </div>
    <a class="headerlink" href="#Grille.nb_colonnes"></a>
    
    

                            </div>
                            <div id="Grille.nb_lignes" class="classattr">
                                <div class="attr variable">
            <span class="name">nb_lignes</span>

        
    </div>
    <a class="headerlink" href="#Grille.nb_lignes"></a>
    
    

                            </div>
                            <div id="Grille.carreaux" class="classattr">
                                <div class="attr variable">
            <span class="name">carreaux</span>

        
    </div>
    <a class="headerlink" href="#Grille.carreaux"></a>
    
    

                            </div>
                            <div id="Grille.coordonnees_carreau" class="classattr">
                                        <input id="Grille.coordonnees_carreau-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">coordonnees_carreau</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">position</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Grille.coordonnees_carreau-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Grille.coordonnees_carreau"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Grille.coordonnees_carreau-128"><a href="#Grille.coordonnees_carreau-128"><span class="linenos">128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">coordonnees_carreau</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
</span><span id="Grille.coordonnees_carreau-129"><a href="#Grille.coordonnees_carreau-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille.coordonnees_carreau-130"><a href="#Grille.coordonnees_carreau-130"><span class="linenos">130</span></a><span class="sd">        Cette méthode récupère les coordonnées du carreau dans la grille dans lequel se trouve une personne.</span>
</span><span id="Grille.coordonnees_carreau-131"><a href="#Grille.coordonnees_carreau-131"><span class="linenos">131</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille.coordonnees_carreau-132"><a href="#Grille.coordonnees_carreau-132"><span class="linenos">132</span></a>        <span class="n">carreau_x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="Grille.coordonnees_carreau-133"><a href="#Grille.coordonnees_carreau-133"><span class="linenos">133</span></a>        <span class="n">carreau_y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">//</span> <span class="bp">self</span><span class="o">.</span><span class="n">taille_carreau</span><span class="p">)</span>
</span><span id="Grille.coordonnees_carreau-134"><a href="#Grille.coordonnees_carreau-134"><span class="linenos">134</span></a>        <span class="k">return</span> <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span>
</span></pre></div>


            <div class="docstring"><p>Cette méthode récupère les coordonnées du carreau dans la grille dans lequel se trouve une personne.</p>
</div>


                            </div>
                            <div id="Grille.construire_grille" class="classattr">
                                        <input id="Grille.construire_grille-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">construire_grille</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">personnes</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Grille.construire_grille-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Grille.construire_grille"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Grille.construire_grille-136"><a href="#Grille.construire_grille-136"><span class="linenos">136</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">personnes</span><span class="p">):</span>
</span><span id="Grille.construire_grille-137"><a href="#Grille.construire_grille-137"><span class="linenos">137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille.construire_grille-138"><a href="#Grille.construire_grille-138"><span class="linenos">138</span></a><span class="sd">        Cette méthode construit la grille à partir d&#39;une liste de personnes.</span>
</span><span id="Grille.construire_grille-139"><a href="#Grille.construire_grille-139"><span class="linenos">139</span></a><span class="sd">        Comme cette fonction est appelée après la mise à jour des positions des personnes dans la fenêtre, on commence par vider toutes les cases avant de pouvoir remplir.</span>
</span><span id="Grille.construire_grille-140"><a href="#Grille.construire_grille-140"><span class="linenos">140</span></a><span class="sd">        On place chaque personne dans la bonne case.</span>
</span><span id="Grille.construire_grille-141"><a href="#Grille.construire_grille-141"><span class="linenos">141</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille.construire_grille-142"><a href="#Grille.construire_grille-142"><span class="linenos">142</span></a>        <span class="k">for</span> <span class="n">colonne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">:</span>
</span><span id="Grille.construire_grille-143"><a href="#Grille.construire_grille-143"><span class="linenos">143</span></a>            <span class="k">for</span> <span class="n">carreau</span> <span class="ow">in</span> <span class="n">colonne</span><span class="p">:</span>
</span><span id="Grille.construire_grille-144"><a href="#Grille.construire_grille-144"><span class="linenos">144</span></a>                <span class="n">carreau</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="Grille.construire_grille-145"><a href="#Grille.construire_grille-145"><span class="linenos">145</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="n">personnes</span><span class="p">:</span>
</span><span id="Grille.construire_grille-146"><a href="#Grille.construire_grille-146"><span class="linenos">146</span></a>            <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordonnees_carreau</span><span class="p">(</span><span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
</span><span id="Grille.construire_grille-147"><a href="#Grille.construire_grille-147"><span class="linenos">147</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">[</span><span class="n">carreau_x</span><span class="p">][</span><span class="n">carreau_y</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">personne</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Cette méthode construit la grille à partir d'une liste de personnes.
Comme cette fonction est appelée après la mise à jour des positions des personnes dans la fenêtre, on commence par vider toutes les cases avant de pouvoir remplir.
On place chaque personne dans la bonne case.</p>
</div>


                            </div>
                            <div id="Grille.voisins_de_personne" class="classattr">
                                        <input id="Grille.voisins_de_personne-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">voisins_de_personne</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">personne</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Grille.voisins_de_personne-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Grille.voisins_de_personne"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Grille.voisins_de_personne-149"><a href="#Grille.voisins_de_personne-149"><span class="linenos">149</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">voisins_de_personne</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">personne</span><span class="p">):</span>
</span><span id="Grille.voisins_de_personne-150"><a href="#Grille.voisins_de_personne-150"><span class="linenos">150</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Grille.voisins_de_personne-151"><a href="#Grille.voisins_de_personne-151"><span class="linenos">151</span></a><span class="sd">        On récupère les voisins d&#39;une personne dans son carreau ou les 8 autour.</span>
</span><span id="Grille.voisins_de_personne-152"><a href="#Grille.voisins_de_personne-152"><span class="linenos">152</span></a><span class="sd">        Ça permet de récupérer les personnes qui seront potentiellement infectées par la personne elle-même infectée.</span>
</span><span id="Grille.voisins_de_personne-153"><a href="#Grille.voisins_de_personne-153"><span class="linenos">153</span></a><span class="sd">        On commence déjà par récupérer le carreau auquel appartient la personne infectée.</span>
</span><span id="Grille.voisins_de_personne-154"><a href="#Grille.voisins_de_personne-154"><span class="linenos">154</span></a><span class="sd">        On pense bien à vérifier qu&#39;on reste dans la grille.</span>
</span><span id="Grille.voisins_de_personne-155"><a href="#Grille.voisins_de_personne-155"><span class="linenos">155</span></a><span class="sd">        Par exemple, si on est dans le carreau tout en haut à droite, il faut bien penser à ne pas sortir de la grille.</span>
</span><span id="Grille.voisins_de_personne-156"><a href="#Grille.voisins_de_personne-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Grille.voisins_de_personne-157"><a href="#Grille.voisins_de_personne-157"><span class="linenos">157</span></a>        <span class="n">carreau_x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coordonnees_carreau</span><span class="p">(</span><span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
</span><span id="Grille.voisins_de_personne-158"><a href="#Grille.voisins_de_personne-158"><span class="linenos">158</span></a>        <span class="n">voisins</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Grille.voisins_de_personne-159"><a href="#Grille.voisins_de_personne-159"><span class="linenos">159</span></a>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Grille.voisins_de_personne-160"><a href="#Grille.voisins_de_personne-160"><span class="linenos">160</span></a>            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="Grille.voisins_de_personne-161"><a href="#Grille.voisins_de_personne-161"><span class="linenos">161</span></a>                <span class="n">nouveau_carreau_x</span><span class="p">,</span> <span class="n">nouveau_carreau_y</span> <span class="o">=</span> <span class="n">carreau_x</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">carreau_y</span> <span class="o">+</span> <span class="n">y</span>
</span><span id="Grille.voisins_de_personne-162"><a href="#Grille.voisins_de_personne-162"><span class="linenos">162</span></a>                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nouveau_carreau_x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nb_colonnes</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">nouveau_carreau_y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">nb_lignes</span><span class="p">:</span>
</span><span id="Grille.voisins_de_personne-163"><a href="#Grille.voisins_de_personne-163"><span class="linenos">163</span></a>                    <span class="n">voisins</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">carreaux</span><span class="p">[</span><span class="n">nouveau_carreau_x</span><span class="p">][</span><span class="n">nouveau_carreau_y</span><span class="p">])</span>
</span><span id="Grille.voisins_de_personne-164"><a href="#Grille.voisins_de_personne-164"><span class="linenos">164</span></a>        <span class="k">return</span> <span class="n">voisins</span>
</span></pre></div>


            <div class="docstring"><p>On récupère les voisins d'une personne dans son carreau ou les 8 autour.
Ça permet de récupérer les personnes qui seront potentiellement infectées par la personne elle-même infectée.
On commence déjà par récupérer le carreau auquel appartient la personne infectée.
On pense bien à vérifier qu'on reste dans la grille.
Par exemple, si on est dans le carreau tout en haut à droite, il faut bien penser à ne pas sortir de la grille.</p>
</div>


                            </div>
                </section>
                <section id="Simulation">
                            <input id="Simulation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Simulation</span>:

                <label class="view-source-button" for="Simulation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Simulation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Simulation-166"><a href="#Simulation-166"><span class="linenos">166</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Simulation</span> <span class="p">:</span>
</span><span id="Simulation-167"><a href="#Simulation-167"><span class="linenos">167</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation-168"><a href="#Simulation-168"><span class="linenos">168</span></a><span class="sd">    On implémente ensuite la classe simulation, qui permet de construire toute la structure pour la simulation.</span>
</span><span id="Simulation-169"><a href="#Simulation-169"><span class="linenos">169</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Simulation-170"><a href="#Simulation-170"><span class="linenos">170</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maladie</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">,</span> <span class="n">nb_personnes</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
</span><span id="Simulation-171"><a href="#Simulation-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation-172"><a href="#Simulation-172"><span class="linenos">172</span></a><span class="sd">        Nb personnes est le nombre de personnes totales dans la simulation, tout état confondu.</span>
</span><span id="Simulation-173"><a href="#Simulation-173"><span class="linenos">173</span></a><span class="sd">        Maladie est l&#39;objet de classe Maladie que la simulation va répandre.</span>
</span><span id="Simulation-174"><a href="#Simulation-174"><span class="linenos">174</span></a><span class="sd">        Liste personnes permet de stocker les personnes de la simulation.</span>
</span><span id="Simulation-175"><a href="#Simulation-175"><span class="linenos">175</span></a><span class="sd">        On stocke les statistiques qui peuvent servir pour la réalisation des statistiques dans l&#39;attribut df_historique.</span>
</span><span id="Simulation-176"><a href="#Simulation-176"><span class="linenos">176</span></a><span class="sd">        On fait le stockage directement dans un dataframe pour que ce soit plus simple pour la réalisation des schémas matplotlib; car c&#39;est la structure priviligiée pour ça.</span>
</span><span id="Simulation-177"><a href="#Simulation-177"><span class="linenos">177</span></a><span class="sd">        Iteration est le numéro de l&#39;itération en cours.</span>
</span><span id="Simulation-178"><a href="#Simulation-178"><span class="linenos">178</span></a><span class="sd">        Grille est l&#39;objet de classe Grille associé à la simulation.</span>
</span><span id="Simulation-179"><a href="#Simulation-179"><span class="linenos">179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation-180"><a href="#Simulation-180"><span class="linenos">180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span> <span class="o">=</span> <span class="n">nb_personnes</span>
</span><span id="Simulation-181"><a href="#Simulation-181"><span class="linenos">181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span> <span class="o">=</span> <span class="n">maladie</span>
</span><span id="Simulation-182"><a href="#Simulation-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Simulation-183"><a href="#Simulation-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df_historique</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;nb_sains&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_infectes&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_immunises&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_morts&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_total&quot;</span><span class="p">])</span>
</span><span id="Simulation-184"><a href="#Simulation-184"><span class="linenos">184</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Simulation-185"><a href="#Simulation-185"><span class="linenos">185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span> <span class="o">=</span> <span class="n">Grille</span><span class="p">(</span><span class="n">taille_carreau</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">distance_infection</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="o">=</span><span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="o">=</span><span class="n">hauteur_fenetre</span><span class="p">)</span>
</span><span id="Simulation-186"><a href="#Simulation-186"><span class="linenos">186</span></a>
</span><span id="Simulation-187"><a href="#Simulation-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialiser_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">,</span> <span class="n">pourcentage_infectes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">pourcentage_immunodeprimes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="Simulation-188"><a href="#Simulation-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation-189"><a href="#Simulation-189"><span class="linenos">189</span></a><span class="sd">        On crée les personnes de la simulation et on infecte un échantillon.</span>
</span><span id="Simulation-190"><a href="#Simulation-190"><span class="linenos">190</span></a><span class="sd">        Par défaut, on met le pourcentage de personnes infectées à 5% mais l&#39;utilisateur peut règler cette valeur.</span>
</span><span id="Simulation-191"><a href="#Simulation-191"><span class="linenos">191</span></a><span class="sd">        Il y a également un indicateur du pourcentage que représentent les personnes immunodéprimées parmi la population.</span>
</span><span id="Simulation-192"><a href="#Simulation-192"><span class="linenos">192</span></a><span class="sd">        On va initialiser chaque personne à une position aléatoire dans la fenêtre.</span>
</span><span id="Simulation-193"><a href="#Simulation-193"><span class="linenos">193</span></a><span class="sd">        On utilise randint pour tirer aléatoirement les chances qu&#39;une personne soit immunodéprimée.</span>
</span><span id="Simulation-194"><a href="#Simulation-194"><span class="linenos">194</span></a><span class="sd">        Ensuite, on infecte le pourcentage de personnes infectées choisi par la personne.</span>
</span><span id="Simulation-195"><a href="#Simulation-195"><span class="linenos">195</span></a><span class="sd">        Pour cela, on tire aléatoirement le nombre de personnes qu&#39;il faut.</span>
</span><span id="Simulation-196"><a href="#Simulation-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation-197"><a href="#Simulation-197"><span class="linenos">197</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span><span class="p">):</span>
</span><span id="Simulation-198"><a href="#Simulation-198"><span class="linenos">198</span></a>            <span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">)]</span>
</span><span id="Simulation-199"><a href="#Simulation-199"><span class="linenos">199</span></a>            <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">pourcentage_immunodeprimes</span><span class="p">:</span>
</span><span id="Simulation-200"><a href="#Simulation-200"><span class="linenos">200</span></a>                <span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">etat</span><span class="o">=</span><span class="s2">&quot;sain&quot;</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="o">=</span><span class="s2">&quot;oui&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
</span><span id="Simulation-201"><a href="#Simulation-201"><span class="linenos">201</span></a>            <span class="k">else</span> <span class="p">:</span>
</span><span id="Simulation-202"><a href="#Simulation-202"><span class="linenos">202</span></a>                <span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">etat</span><span class="o">=</span><span class="s2">&quot;sain&quot;</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="o">=</span><span class="s2">&quot;non&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
</span><span id="Simulation-203"><a href="#Simulation-203"><span class="linenos">203</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">personne</span><span class="p">)</span>
</span><span id="Simulation-204"><a href="#Simulation-204"><span class="linenos">204</span></a>        <span class="n">nb_infectes_initiaux</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span> <span class="o">*</span> <span class="p">(</span><span class="n">pourcentage_infectes</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>
</span><span id="Simulation-205"><a href="#Simulation-205"><span class="linenos">205</span></a>        <span class="n">infectes_initiaux</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">,</span> <span class="n">nb_infectes_initiaux</span><span class="p">)</span>
</span><span id="Simulation-206"><a href="#Simulation-206"><span class="linenos">206</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="n">infectes_initiaux</span><span class="p">:</span>
</span><span id="Simulation-207"><a href="#Simulation-207"><span class="linenos">207</span></a>            <span class="n">personne</span><span class="o">.</span><span class="n">etre_infecte</span><span class="p">()</span>
</span><span id="Simulation-208"><a href="#Simulation-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">)</span>
</span><span id="Simulation-209"><a href="#Simulation-209"><span class="linenos">209</span></a>    
</span><span id="Simulation-210"><a href="#Simulation-210"><span class="linenos">210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">propager_infection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Simulation-211"><a href="#Simulation-211"><span class="linenos">211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation-212"><a href="#Simulation-212"><span class="linenos">212</span></a><span class="sd">        On fait la propagation de la maladie aux personnes à côté d&#39;une personne infectée.</span>
</span><span id="Simulation-213"><a href="#Simulation-213"><span class="linenos">213</span></a><span class="sd">        Pour chaque personne infectée, on récupère ses voisins, donc ceux dans sa case de la grille ou les 8 cas autour.</span>
</span><span id="Simulation-214"><a href="#Simulation-214"><span class="linenos">214</span></a><span class="sd">        On regarde si la distance entre les deux points est assez faible pour que la personne puisse être infectée.</span>
</span><span id="Simulation-215"><a href="#Simulation-215"><span class="linenos">215</span></a><span class="sd">        Comme la valeur de risque de transmission est un entier entre 1 et 100, on va récupérer une valeur aléatoire.</span>
</span><span id="Simulation-216"><a href="#Simulation-216"><span class="linenos">216</span></a><span class="sd">        Si elle est inférieure au pourcentage de risque de transmission, la personne est maintenant infectée.</span>
</span><span id="Simulation-217"><a href="#Simulation-217"><span class="linenos">217</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation-218"><a href="#Simulation-218"><span class="linenos">218</span></a>        <span class="n">infectes</span> <span class="o">=</span> <span class="p">[</span><span class="n">personne</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">]</span>
</span><span id="Simulation-219"><a href="#Simulation-219"><span class="linenos">219</span></a>        <span class="k">for</span> <span class="n">infecte</span> <span class="ow">in</span> <span class="n">infectes</span><span class="p">:</span>
</span><span id="Simulation-220"><a href="#Simulation-220"><span class="linenos">220</span></a>            <span class="n">voisins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">voisins_de_personne</span><span class="p">(</span><span class="n">infecte</span><span class="p">)</span>
</span><span id="Simulation-221"><a href="#Simulation-221"><span class="linenos">221</span></a>            <span class="k">for</span> <span class="n">voisin</span> <span class="ow">in</span> <span class="n">voisins</span><span class="p">:</span>
</span><span id="Simulation-222"><a href="#Simulation-222"><span class="linenos">222</span></a>                <span class="k">if</span> <span class="n">voisin</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;sain&quot;</span><span class="p">:</span>
</span><span id="Simulation-223"><a href="#Simulation-223"><span class="linenos">223</span></a>                    <span class="k">if</span> <span class="n">infecte</span><span class="o">.</span><span class="n">etre_en_contact</span><span class="p">(</span><span class="n">voisin</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">distance_infection</span><span class="p">):</span>
</span><span id="Simulation-224"><a href="#Simulation-224"><span class="linenos">224</span></a>                        <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">risque_transmission</span><span class="p">:</span>
</span><span id="Simulation-225"><a href="#Simulation-225"><span class="linenos">225</span></a>                            <span class="n">voisin</span><span class="o">.</span><span class="n">etre_infecte</span><span class="p">()</span>
</span><span id="Simulation-226"><a href="#Simulation-226"><span class="linenos">226</span></a>    
</span><span id="Simulation-227"><a href="#Simulation-227"><span class="linenos">227</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mise_a_jour_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Simulation-228"><a href="#Simulation-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation-229"><a href="#Simulation-229"><span class="linenos">229</span></a><span class="sd">        On met à jour après chaque itération.</span>
</span><span id="Simulation-230"><a href="#Simulation-230"><span class="linenos">230</span></a><span class="sd">        Actuellement, la mise à jour de la position des personnes, c&#39;est-à-dire leurs mouvements, est aléatoire sans tendance guidée.</span>
</span><span id="Simulation-231"><a href="#Simulation-231"><span class="linenos">231</span></a><span class="sd">        Ensuite, on reconstruit la grille avec les nouvelles positions, on propage l’infection et on met à jour les états pour chaque personne.</span>
</span><span id="Simulation-232"><a href="#Simulation-232"><span class="linenos">232</span></a><span class="sd">        Pour les calculs, on va estimer que les personnes immunodéprimées ont deux fois plus de chances de mourir.</span>
</span><span id="Simulation-233"><a href="#Simulation-233"><span class="linenos">233</span></a><span class="sd">        Si la personne n&#39;a pas une maladie permanente et qu&#39;elle a survécu à toutes les itérations nécessaires pour que la maladie passe, la personne est guérie.</span>
</span><span id="Simulation-234"><a href="#Simulation-234"><span class="linenos">234</span></a><span class="sd">        Si on est immunisé après la maladie, la personne gagne ce statut, sinon elle est juste saine à nouveau.</span>
</span><span id="Simulation-235"><a href="#Simulation-235"><span class="linenos">235</span></a><span class="sd">        Finalement, on enregistre les statistiques actuelles sous forme de dataframe en calculant le nombre de personnes par état.</span>
</span><span id="Simulation-236"><a href="#Simulation-236"><span class="linenos">236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation-237"><a href="#Simulation-237"><span class="linenos">237</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">:</span>
</span><span id="Simulation-238"><a href="#Simulation-238"><span class="linenos">238</span></a>            <span class="n">x</span> <span class="o">=</span> <span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="Simulation-239"><a href="#Simulation-239"><span class="linenos">239</span></a>            <span class="n">y</span> <span class="o">=</span> <span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="Simulation-240"><a href="#Simulation-240"><span class="linenos">240</span></a>            <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
</span><span id="Simulation-241"><a href="#Simulation-241"><span class="linenos">241</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Simulation-242"><a href="#Simulation-242"><span class="linenos">242</span></a>            <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">largeur</span> <span class="p">:</span>
</span><span id="Simulation-243"><a href="#Simulation-243"><span class="linenos">243</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">largeur</span>
</span><span id="Simulation-244"><a href="#Simulation-244"><span class="linenos">244</span></a>            <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
</span><span id="Simulation-245"><a href="#Simulation-245"><span class="linenos">245</span></a>                <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Simulation-246"><a href="#Simulation-246"><span class="linenos">246</span></a>            <span class="k">elif</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">hauteur</span> <span class="p">:</span>
</span><span id="Simulation-247"><a href="#Simulation-247"><span class="linenos">247</span></a>                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">hauteur</span>
</span><span id="Simulation-248"><a href="#Simulation-248"><span class="linenos">248</span></a>            <span class="n">personne</span><span class="o">.</span><span class="n">se_deplace</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
</span><span id="Simulation-249"><a href="#Simulation-249"><span class="linenos">249</span></a>
</span><span id="Simulation-250"><a href="#Simulation-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">)</span>
</span><span id="Simulation-251"><a href="#Simulation-251"><span class="linenos">251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">propager_infection</span><span class="p">()</span>
</span><span id="Simulation-252"><a href="#Simulation-252"><span class="linenos">252</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">:</span>
</span><span id="Simulation-253"><a href="#Simulation-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">:</span>
</span><span id="Simulation-254"><a href="#Simulation-254"><span class="linenos">254</span></a>                <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Simulation-255"><a href="#Simulation-255"><span class="linenos">255</span></a>                <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Simulation-256"><a href="#Simulation-256"><span class="linenos">256</span></a>                    <span class="n">risque</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">taux_letalite</span>
</span><span id="Simulation-257"><a href="#Simulation-257"><span class="linenos">257</span></a>                    <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">immunodeprime</span> <span class="o">==</span> <span class="s2">&quot;oui&quot;</span><span class="p">:</span>
</span><span id="Simulation-258"><a href="#Simulation-258"><span class="linenos">258</span></a>                        <span class="n">risque</span> <span class="o">*=</span> <span class="mf">1.5</span>
</span><span id="Simulation-259"><a href="#Simulation-259"><span class="linenos">259</span></a>                    <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">risque</span><span class="p">:</span>
</span><span id="Simulation-260"><a href="#Simulation-260"><span class="linenos">260</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">mourir</span><span class="p">()</span>
</span><span id="Simulation-261"><a href="#Simulation-261"><span class="linenos">261</span></a>                        <span class="k">continue</span>
</span><span id="Simulation-262"><a href="#Simulation-262"><span class="linenos">262</span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">temps_guerison</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">temps_guerison</span><span class="p">:</span>
</span><span id="Simulation-263"><a href="#Simulation-263"><span class="linenos">263</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">immunite_apres_guerison</span> <span class="o">==</span> <span class="s2">&quot;oui&quot;</span><span class="p">:</span>
</span><span id="Simulation-264"><a href="#Simulation-264"><span class="linenos">264</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">etre_immunise</span><span class="p">()</span>
</span><span id="Simulation-265"><a href="#Simulation-265"><span class="linenos">265</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Simulation-266"><a href="#Simulation-266"><span class="linenos">266</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">guerir</span><span class="p">()</span>
</span><span id="Simulation-267"><a href="#Simulation-267"><span class="linenos">267</span></a>        <span class="n">nb_sains</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;sain&quot;</span><span class="p">)</span>
</span><span id="Simulation-268"><a href="#Simulation-268"><span class="linenos">268</span></a>        <span class="n">nb_infectes</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">)</span>
</span><span id="Simulation-269"><a href="#Simulation-269"><span class="linenos">269</span></a>        <span class="n">nb_immunises</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;immunise&quot;</span><span class="p">)</span>
</span><span id="Simulation-270"><a href="#Simulation-270"><span class="linenos">270</span></a>        <span class="n">nb_morts</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;mort&quot;</span><span class="p">)</span>
</span><span id="Simulation-271"><a href="#Simulation-271"><span class="linenos">271</span></a>        <span class="n">nb_total</span> <span class="o">=</span> <span class="n">nb_sains</span> <span class="o">+</span> <span class="n">nb_infectes</span> <span class="o">+</span> <span class="n">nb_immunises</span> <span class="o">+</span> <span class="n">nb_morts</span>
</span><span id="Simulation-272"><a href="#Simulation-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df_historique</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb_sains</span><span class="p">,</span> <span class="n">nb_infectes</span><span class="p">,</span> <span class="n">nb_immunises</span><span class="p">,</span> <span class="n">nb_morts</span><span class="p">,</span> <span class="n">nb_total</span><span class="p">]</span>
</span><span id="Simulation-273"><a href="#Simulation-273"><span class="linenos">273</span></a>
</span><span id="Simulation-274"><a href="#Simulation-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>On implémente ensuite la classe simulation, qui permet de construire toute la structure pour la simulation.</p>
</div>


                            <div id="Simulation.__init__" class="classattr">
                                        <input id="Simulation.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Simulation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">maladie</span>, </span><span class="param"><span class="n">largeur_fenetre</span>, </span><span class="param"><span class="n">hauteur_fenetre</span>, </span><span class="param"><span class="n">nb_personnes</span><span class="o">=</span><span class="mi">50</span></span>)</span>

                <label class="view-source-button" for="Simulation.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Simulation.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Simulation.__init__-170"><a href="#Simulation.__init__-170"><span class="linenos">170</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maladie</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">,</span> <span class="n">nb_personnes</span><span class="o">=</span><span class="mi">50</span><span class="p">):</span>
</span><span id="Simulation.__init__-171"><a href="#Simulation.__init__-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation.__init__-172"><a href="#Simulation.__init__-172"><span class="linenos">172</span></a><span class="sd">        Nb personnes est le nombre de personnes totales dans la simulation, tout état confondu.</span>
</span><span id="Simulation.__init__-173"><a href="#Simulation.__init__-173"><span class="linenos">173</span></a><span class="sd">        Maladie est l&#39;objet de classe Maladie que la simulation va répandre.</span>
</span><span id="Simulation.__init__-174"><a href="#Simulation.__init__-174"><span class="linenos">174</span></a><span class="sd">        Liste personnes permet de stocker les personnes de la simulation.</span>
</span><span id="Simulation.__init__-175"><a href="#Simulation.__init__-175"><span class="linenos">175</span></a><span class="sd">        On stocke les statistiques qui peuvent servir pour la réalisation des statistiques dans l&#39;attribut df_historique.</span>
</span><span id="Simulation.__init__-176"><a href="#Simulation.__init__-176"><span class="linenos">176</span></a><span class="sd">        On fait le stockage directement dans un dataframe pour que ce soit plus simple pour la réalisation des schémas matplotlib; car c&#39;est la structure priviligiée pour ça.</span>
</span><span id="Simulation.__init__-177"><a href="#Simulation.__init__-177"><span class="linenos">177</span></a><span class="sd">        Iteration est le numéro de l&#39;itération en cours.</span>
</span><span id="Simulation.__init__-178"><a href="#Simulation.__init__-178"><span class="linenos">178</span></a><span class="sd">        Grille est l&#39;objet de classe Grille associé à la simulation.</span>
</span><span id="Simulation.__init__-179"><a href="#Simulation.__init__-179"><span class="linenos">179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation.__init__-180"><a href="#Simulation.__init__-180"><span class="linenos">180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span> <span class="o">=</span> <span class="n">nb_personnes</span>
</span><span id="Simulation.__init__-181"><a href="#Simulation.__init__-181"><span class="linenos">181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span> <span class="o">=</span> <span class="n">maladie</span>
</span><span id="Simulation.__init__-182"><a href="#Simulation.__init__-182"><span class="linenos">182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Simulation.__init__-183"><a href="#Simulation.__init__-183"><span class="linenos">183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df_historique</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;nb_sains&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_infectes&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_immunises&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_morts&quot;</span><span class="p">,</span> <span class="s2">&quot;nb_total&quot;</span><span class="p">])</span>
</span><span id="Simulation.__init__-184"><a href="#Simulation.__init__-184"><span class="linenos">184</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Simulation.__init__-185"><a href="#Simulation.__init__-185"><span class="linenos">185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span> <span class="o">=</span> <span class="n">Grille</span><span class="p">(</span><span class="n">taille_carreau</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">distance_infection</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="o">=</span><span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="o">=</span><span class="n">hauteur_fenetre</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Nb personnes est le nombre de personnes totales dans la simulation, tout état confondu.
Maladie est l'objet de classe Maladie que la simulation va répandre.
Liste personnes permet de stocker les personnes de la simulation.
On stocke les statistiques qui peuvent servir pour la réalisation des statistiques dans l'attribut df_historique.
On fait le stockage directement dans un dataframe pour que ce soit plus simple pour la réalisation des schémas matplotlib; car c'est la structure priviligiée pour ça.
Iteration est le numéro de l'itération en cours.
Grille est l'objet de classe Grille associé à la simulation.</p>
</div>


                            </div>
                            <div id="Simulation.nb_personnes" class="classattr">
                                <div class="attr variable">
            <span class="name">nb_personnes</span>

        
    </div>
    <a class="headerlink" href="#Simulation.nb_personnes"></a>
    
    

                            </div>
                            <div id="Simulation.maladie" class="classattr">
                                <div class="attr variable">
            <span class="name">maladie</span>

        
    </div>
    <a class="headerlink" href="#Simulation.maladie"></a>
    
    

                            </div>
                            <div id="Simulation.liste_personnes" class="classattr">
                                <div class="attr variable">
            <span class="name">liste_personnes</span>

        
    </div>
    <a class="headerlink" href="#Simulation.liste_personnes"></a>
    
    

                            </div>
                            <div id="Simulation.df_historique" class="classattr">
                                <div class="attr variable">
            <span class="name">df_historique</span>

        
    </div>
    <a class="headerlink" href="#Simulation.df_historique"></a>
    
    

                            </div>
                            <div id="Simulation.iterations" class="classattr">
                                <div class="attr variable">
            <span class="name">iterations</span>

        
    </div>
    <a class="headerlink" href="#Simulation.iterations"></a>
    
    

                            </div>
                            <div id="Simulation.grille" class="classattr">
                                <div class="attr variable">
            <span class="name">grille</span>

        
    </div>
    <a class="headerlink" href="#Simulation.grille"></a>
    
    

                            </div>
                            <div id="Simulation.initialiser_population" class="classattr">
                                        <input id="Simulation.initialiser_population-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">initialiser_population</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">largeur_fenetre</span>,</span><span class="param">	<span class="n">hauteur_fenetre</span>,</span><span class="param">	<span class="n">pourcentage_infectes</span><span class="o">=</span><span class="mi">5</span>,</span><span class="param">	<span class="n">pourcentage_immunodeprimes</span><span class="o">=</span><span class="mi">5</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Simulation.initialiser_population-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Simulation.initialiser_population"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Simulation.initialiser_population-187"><a href="#Simulation.initialiser_population-187"><span class="linenos">187</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">initialiser_population</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">,</span> <span class="n">pourcentage_infectes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">pourcentage_immunodeprimes</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
</span><span id="Simulation.initialiser_population-188"><a href="#Simulation.initialiser_population-188"><span class="linenos">188</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation.initialiser_population-189"><a href="#Simulation.initialiser_population-189"><span class="linenos">189</span></a><span class="sd">        On crée les personnes de la simulation et on infecte un échantillon.</span>
</span><span id="Simulation.initialiser_population-190"><a href="#Simulation.initialiser_population-190"><span class="linenos">190</span></a><span class="sd">        Par défaut, on met le pourcentage de personnes infectées à 5% mais l&#39;utilisateur peut règler cette valeur.</span>
</span><span id="Simulation.initialiser_population-191"><a href="#Simulation.initialiser_population-191"><span class="linenos">191</span></a><span class="sd">        Il y a également un indicateur du pourcentage que représentent les personnes immunodéprimées parmi la population.</span>
</span><span id="Simulation.initialiser_population-192"><a href="#Simulation.initialiser_population-192"><span class="linenos">192</span></a><span class="sd">        On va initialiser chaque personne à une position aléatoire dans la fenêtre.</span>
</span><span id="Simulation.initialiser_population-193"><a href="#Simulation.initialiser_population-193"><span class="linenos">193</span></a><span class="sd">        On utilise randint pour tirer aléatoirement les chances qu&#39;une personne soit immunodéprimée.</span>
</span><span id="Simulation.initialiser_population-194"><a href="#Simulation.initialiser_population-194"><span class="linenos">194</span></a><span class="sd">        Ensuite, on infecte le pourcentage de personnes infectées choisi par la personne.</span>
</span><span id="Simulation.initialiser_population-195"><a href="#Simulation.initialiser_population-195"><span class="linenos">195</span></a><span class="sd">        Pour cela, on tire aléatoirement le nombre de personnes qu&#39;il faut.</span>
</span><span id="Simulation.initialiser_population-196"><a href="#Simulation.initialiser_population-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation.initialiser_population-197"><a href="#Simulation.initialiser_population-197"><span class="linenos">197</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span><span class="p">):</span>
</span><span id="Simulation.initialiser_population-198"><a href="#Simulation.initialiser_population-198"><span class="linenos">198</span></a>            <span class="n">position</span> <span class="o">=</span> <span class="p">[</span><span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">largeur_fenetre</span><span class="p">),</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">hauteur_fenetre</span><span class="p">)]</span>
</span><span id="Simulation.initialiser_population-199"><a href="#Simulation.initialiser_population-199"><span class="linenos">199</span></a>            <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">pourcentage_immunodeprimes</span><span class="p">:</span>
</span><span id="Simulation.initialiser_population-200"><a href="#Simulation.initialiser_population-200"><span class="linenos">200</span></a>                <span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">etat</span><span class="o">=</span><span class="s2">&quot;sain&quot;</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="o">=</span><span class="s2">&quot;oui&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
</span><span id="Simulation.initialiser_population-201"><a href="#Simulation.initialiser_population-201"><span class="linenos">201</span></a>            <span class="k">else</span> <span class="p">:</span>
</span><span id="Simulation.initialiser_population-202"><a href="#Simulation.initialiser_population-202"><span class="linenos">202</span></a>                <span class="n">personne</span> <span class="o">=</span> <span class="n">Personne</span><span class="p">(</span><span class="n">etat</span><span class="o">=</span><span class="s2">&quot;sain&quot;</span><span class="p">,</span> <span class="n">immunodeprime</span><span class="o">=</span><span class="s2">&quot;non&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>
</span><span id="Simulation.initialiser_population-203"><a href="#Simulation.initialiser_population-203"><span class="linenos">203</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">personne</span><span class="p">)</span>
</span><span id="Simulation.initialiser_population-204"><a href="#Simulation.initialiser_population-204"><span class="linenos">204</span></a>        <span class="n">nb_infectes_initiaux</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nb_personnes</span> <span class="o">*</span> <span class="p">(</span><span class="n">pourcentage_infectes</span><span class="o">/</span><span class="mi">100</span><span class="p">))</span>
</span><span id="Simulation.initialiser_population-205"><a href="#Simulation.initialiser_population-205"><span class="linenos">205</span></a>        <span class="n">infectes_initiaux</span> <span class="o">=</span> <span class="n">sample</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">,</span> <span class="n">nb_infectes_initiaux</span><span class="p">)</span>
</span><span id="Simulation.initialiser_population-206"><a href="#Simulation.initialiser_population-206"><span class="linenos">206</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="n">infectes_initiaux</span><span class="p">:</span>
</span><span id="Simulation.initialiser_population-207"><a href="#Simulation.initialiser_population-207"><span class="linenos">207</span></a>            <span class="n">personne</span><span class="o">.</span><span class="n">etre_infecte</span><span class="p">()</span>
</span><span id="Simulation.initialiser_population-208"><a href="#Simulation.initialiser_population-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>On crée les personnes de la simulation et on infecte un échantillon.
Par défaut, on met le pourcentage de personnes infectées à 5% mais l'utilisateur peut règler cette valeur.
Il y a également un indicateur du pourcentage que représentent les personnes immunodéprimées parmi la population.
On va initialiser chaque personne à une position aléatoire dans la fenêtre.
On utilise randint pour tirer aléatoirement les chances qu'une personne soit immunodéprimée.
Ensuite, on infecte le pourcentage de personnes infectées choisi par la personne.
Pour cela, on tire aléatoirement le nombre de personnes qu'il faut.</p>
</div>


                            </div>
                            <div id="Simulation.propager_infection" class="classattr">
                                        <input id="Simulation.propager_infection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">propager_infection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Simulation.propager_infection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Simulation.propager_infection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Simulation.propager_infection-210"><a href="#Simulation.propager_infection-210"><span class="linenos">210</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">propager_infection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Simulation.propager_infection-211"><a href="#Simulation.propager_infection-211"><span class="linenos">211</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation.propager_infection-212"><a href="#Simulation.propager_infection-212"><span class="linenos">212</span></a><span class="sd">        On fait la propagation de la maladie aux personnes à côté d&#39;une personne infectée.</span>
</span><span id="Simulation.propager_infection-213"><a href="#Simulation.propager_infection-213"><span class="linenos">213</span></a><span class="sd">        Pour chaque personne infectée, on récupère ses voisins, donc ceux dans sa case de la grille ou les 8 cas autour.</span>
</span><span id="Simulation.propager_infection-214"><a href="#Simulation.propager_infection-214"><span class="linenos">214</span></a><span class="sd">        On regarde si la distance entre les deux points est assez faible pour que la personne puisse être infectée.</span>
</span><span id="Simulation.propager_infection-215"><a href="#Simulation.propager_infection-215"><span class="linenos">215</span></a><span class="sd">        Comme la valeur de risque de transmission est un entier entre 1 et 100, on va récupérer une valeur aléatoire.</span>
</span><span id="Simulation.propager_infection-216"><a href="#Simulation.propager_infection-216"><span class="linenos">216</span></a><span class="sd">        Si elle est inférieure au pourcentage de risque de transmission, la personne est maintenant infectée.</span>
</span><span id="Simulation.propager_infection-217"><a href="#Simulation.propager_infection-217"><span class="linenos">217</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation.propager_infection-218"><a href="#Simulation.propager_infection-218"><span class="linenos">218</span></a>        <span class="n">infectes</span> <span class="o">=</span> <span class="p">[</span><span class="n">personne</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">]</span>
</span><span id="Simulation.propager_infection-219"><a href="#Simulation.propager_infection-219"><span class="linenos">219</span></a>        <span class="k">for</span> <span class="n">infecte</span> <span class="ow">in</span> <span class="n">infectes</span><span class="p">:</span>
</span><span id="Simulation.propager_infection-220"><a href="#Simulation.propager_infection-220"><span class="linenos">220</span></a>            <span class="n">voisins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">voisins_de_personne</span><span class="p">(</span><span class="n">infecte</span><span class="p">)</span>
</span><span id="Simulation.propager_infection-221"><a href="#Simulation.propager_infection-221"><span class="linenos">221</span></a>            <span class="k">for</span> <span class="n">voisin</span> <span class="ow">in</span> <span class="n">voisins</span><span class="p">:</span>
</span><span id="Simulation.propager_infection-222"><a href="#Simulation.propager_infection-222"><span class="linenos">222</span></a>                <span class="k">if</span> <span class="n">voisin</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;sain&quot;</span><span class="p">:</span>
</span><span id="Simulation.propager_infection-223"><a href="#Simulation.propager_infection-223"><span class="linenos">223</span></a>                    <span class="k">if</span> <span class="n">infecte</span><span class="o">.</span><span class="n">etre_en_contact</span><span class="p">(</span><span class="n">voisin</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">distance_infection</span><span class="p">):</span>
</span><span id="Simulation.propager_infection-224"><a href="#Simulation.propager_infection-224"><span class="linenos">224</span></a>                        <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">risque_transmission</span><span class="p">:</span>
</span><span id="Simulation.propager_infection-225"><a href="#Simulation.propager_infection-225"><span class="linenos">225</span></a>                            <span class="n">voisin</span><span class="o">.</span><span class="n">etre_infecte</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>On fait la propagation de la maladie aux personnes à côté d'une personne infectée.
Pour chaque personne infectée, on récupère ses voisins, donc ceux dans sa case de la grille ou les 8 cas autour.
On regarde si la distance entre les deux points est assez faible pour que la personne puisse être infectée.
Comme la valeur de risque de transmission est un entier entre 1 et 100, on va récupérer une valeur aléatoire.
Si elle est inférieure au pourcentage de risque de transmission, la personne est maintenant infectée.</p>
</div>


                            </div>
                            <div id="Simulation.mise_a_jour_iteration" class="classattr">
                                        <input id="Simulation.mise_a_jour_iteration-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mise_a_jour_iteration</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Simulation.mise_a_jour_iteration-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Simulation.mise_a_jour_iteration"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Simulation.mise_a_jour_iteration-227"><a href="#Simulation.mise_a_jour_iteration-227"><span class="linenos">227</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">mise_a_jour_iteration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Simulation.mise_a_jour_iteration-228"><a href="#Simulation.mise_a_jour_iteration-228"><span class="linenos">228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Simulation.mise_a_jour_iteration-229"><a href="#Simulation.mise_a_jour_iteration-229"><span class="linenos">229</span></a><span class="sd">        On met à jour après chaque itération.</span>
</span><span id="Simulation.mise_a_jour_iteration-230"><a href="#Simulation.mise_a_jour_iteration-230"><span class="linenos">230</span></a><span class="sd">        Actuellement, la mise à jour de la position des personnes, c&#39;est-à-dire leurs mouvements, est aléatoire sans tendance guidée.</span>
</span><span id="Simulation.mise_a_jour_iteration-231"><a href="#Simulation.mise_a_jour_iteration-231"><span class="linenos">231</span></a><span class="sd">        Ensuite, on reconstruit la grille avec les nouvelles positions, on propage l’infection et on met à jour les états pour chaque personne.</span>
</span><span id="Simulation.mise_a_jour_iteration-232"><a href="#Simulation.mise_a_jour_iteration-232"><span class="linenos">232</span></a><span class="sd">        Pour les calculs, on va estimer que les personnes immunodéprimées ont deux fois plus de chances de mourir.</span>
</span><span id="Simulation.mise_a_jour_iteration-233"><a href="#Simulation.mise_a_jour_iteration-233"><span class="linenos">233</span></a><span class="sd">        Si la personne n&#39;a pas une maladie permanente et qu&#39;elle a survécu à toutes les itérations nécessaires pour que la maladie passe, la personne est guérie.</span>
</span><span id="Simulation.mise_a_jour_iteration-234"><a href="#Simulation.mise_a_jour_iteration-234"><span class="linenos">234</span></a><span class="sd">        Si on est immunisé après la maladie, la personne gagne ce statut, sinon elle est juste saine à nouveau.</span>
</span><span id="Simulation.mise_a_jour_iteration-235"><a href="#Simulation.mise_a_jour_iteration-235"><span class="linenos">235</span></a><span class="sd">        Finalement, on enregistre les statistiques actuelles sous forme de dataframe en calculant le nombre de personnes par état.</span>
</span><span id="Simulation.mise_a_jour_iteration-236"><a href="#Simulation.mise_a_jour_iteration-236"><span class="linenos">236</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Simulation.mise_a_jour_iteration-237"><a href="#Simulation.mise_a_jour_iteration-237"><span class="linenos">237</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-238"><a href="#Simulation.mise_a_jour_iteration-238"><span class="linenos">238</span></a>            <span class="n">x</span> <span class="o">=</span> <span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-239"><a href="#Simulation.mise_a_jour_iteration-239"><span class="linenos">239</span></a>            <span class="n">y</span> <span class="o">=</span> <span class="n">personne</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">randint</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-240"><a href="#Simulation.mise_a_jour_iteration-240"><span class="linenos">240</span></a>            <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-241"><a href="#Simulation.mise_a_jour_iteration-241"><span class="linenos">241</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Simulation.mise_a_jour_iteration-242"><a href="#Simulation.mise_a_jour_iteration-242"><span class="linenos">242</span></a>            <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">largeur</span> <span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-243"><a href="#Simulation.mise_a_jour_iteration-243"><span class="linenos">243</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">largeur</span>
</span><span id="Simulation.mise_a_jour_iteration-244"><a href="#Simulation.mise_a_jour_iteration-244"><span class="linenos">244</span></a>            <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-245"><a href="#Simulation.mise_a_jour_iteration-245"><span class="linenos">245</span></a>                <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Simulation.mise_a_jour_iteration-246"><a href="#Simulation.mise_a_jour_iteration-246"><span class="linenos">246</span></a>            <span class="k">elif</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">hauteur</span> <span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-247"><a href="#Simulation.mise_a_jour_iteration-247"><span class="linenos">247</span></a>                <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">hauteur</span>
</span><span id="Simulation.mise_a_jour_iteration-248"><a href="#Simulation.mise_a_jour_iteration-248"><span class="linenos">248</span></a>            <span class="n">personne</span><span class="o">.</span><span class="n">se_deplace</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">])</span>
</span><span id="Simulation.mise_a_jour_iteration-249"><a href="#Simulation.mise_a_jour_iteration-249"><span class="linenos">249</span></a>
</span><span id="Simulation.mise_a_jour_iteration-250"><a href="#Simulation.mise_a_jour_iteration-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">grille</span><span class="o">.</span><span class="n">construire_grille</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-251"><a href="#Simulation.mise_a_jour_iteration-251"><span class="linenos">251</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">propager_infection</span><span class="p">()</span>
</span><span id="Simulation.mise_a_jour_iteration-252"><a href="#Simulation.mise_a_jour_iteration-252"><span class="linenos">252</span></a>        <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-253"><a href="#Simulation.mise_a_jour_iteration-253"><span class="linenos">253</span></a>            <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-254"><a href="#Simulation.mise_a_jour_iteration-254"><span class="linenos">254</span></a>                <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Simulation.mise_a_jour_iteration-255"><a href="#Simulation.mise_a_jour_iteration-255"><span class="linenos">255</span></a>                <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-256"><a href="#Simulation.mise_a_jour_iteration-256"><span class="linenos">256</span></a>                    <span class="n">risque</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">taux_letalite</span>
</span><span id="Simulation.mise_a_jour_iteration-257"><a href="#Simulation.mise_a_jour_iteration-257"><span class="linenos">257</span></a>                    <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">immunodeprime</span> <span class="o">==</span> <span class="s2">&quot;oui&quot;</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-258"><a href="#Simulation.mise_a_jour_iteration-258"><span class="linenos">258</span></a>                        <span class="n">risque</span> <span class="o">*=</span> <span class="mf">1.5</span>
</span><span id="Simulation.mise_a_jour_iteration-259"><a href="#Simulation.mise_a_jour_iteration-259"><span class="linenos">259</span></a>                    <span class="k">if</span> <span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">risque</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-260"><a href="#Simulation.mise_a_jour_iteration-260"><span class="linenos">260</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">mourir</span><span class="p">()</span>
</span><span id="Simulation.mise_a_jour_iteration-261"><a href="#Simulation.mise_a_jour_iteration-261"><span class="linenos">261</span></a>                        <span class="k">continue</span>
</span><span id="Simulation.mise_a_jour_iteration-262"><a href="#Simulation.mise_a_jour_iteration-262"><span class="linenos">262</span></a>                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">temps_guerison</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">personne</span><span class="o">.</span><span class="n">cpt_iterations_infection</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">temps_guerison</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-263"><a href="#Simulation.mise_a_jour_iteration-263"><span class="linenos">263</span></a>                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maladie</span><span class="o">.</span><span class="n">immunite_apres_guerison</span> <span class="o">==</span> <span class="s2">&quot;oui&quot;</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-264"><a href="#Simulation.mise_a_jour_iteration-264"><span class="linenos">264</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">etre_immunise</span><span class="p">()</span>
</span><span id="Simulation.mise_a_jour_iteration-265"><a href="#Simulation.mise_a_jour_iteration-265"><span class="linenos">265</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Simulation.mise_a_jour_iteration-266"><a href="#Simulation.mise_a_jour_iteration-266"><span class="linenos">266</span></a>                        <span class="n">personne</span><span class="o">.</span><span class="n">guerir</span><span class="p">()</span>
</span><span id="Simulation.mise_a_jour_iteration-267"><a href="#Simulation.mise_a_jour_iteration-267"><span class="linenos">267</span></a>        <span class="n">nb_sains</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;sain&quot;</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-268"><a href="#Simulation.mise_a_jour_iteration-268"><span class="linenos">268</span></a>        <span class="n">nb_infectes</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;infecte&quot;</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-269"><a href="#Simulation.mise_a_jour_iteration-269"><span class="linenos">269</span></a>        <span class="n">nb_immunises</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;immunise&quot;</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-270"><a href="#Simulation.mise_a_jour_iteration-270"><span class="linenos">270</span></a>        <span class="n">nb_morts</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="mi">1</span> <span class="k">for</span> <span class="n">personne</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste_personnes</span> <span class="k">if</span> <span class="n">personne</span><span class="o">.</span><span class="n">etat</span> <span class="o">==</span> <span class="s2">&quot;mort&quot;</span><span class="p">)</span>
</span><span id="Simulation.mise_a_jour_iteration-271"><a href="#Simulation.mise_a_jour_iteration-271"><span class="linenos">271</span></a>        <span class="n">nb_total</span> <span class="o">=</span> <span class="n">nb_sains</span> <span class="o">+</span> <span class="n">nb_infectes</span> <span class="o">+</span> <span class="n">nb_immunises</span> <span class="o">+</span> <span class="n">nb_morts</span>
</span><span id="Simulation.mise_a_jour_iteration-272"><a href="#Simulation.mise_a_jour_iteration-272"><span class="linenos">272</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">df_historique</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb_sains</span><span class="p">,</span> <span class="n">nb_infectes</span><span class="p">,</span> <span class="n">nb_immunises</span><span class="p">,</span> <span class="n">nb_morts</span><span class="p">,</span> <span class="n">nb_total</span><span class="p">]</span>
</span><span id="Simulation.mise_a_jour_iteration-273"><a href="#Simulation.mise_a_jour_iteration-273"><span class="linenos">273</span></a>
</span><span id="Simulation.mise_a_jour_iteration-274"><a href="#Simulation.mise_a_jour_iteration-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">+=</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>On met à jour après chaque itération.
Actuellement, la mise à jour de la position des personnes, c'est-à-dire leurs mouvements, est aléatoire sans tendance guidée.
Ensuite, on reconstruit la grille avec les nouvelles positions, on propage l’infection et on met à jour les états pour chaque personne.
Pour les calculs, on va estimer que les personnes immunodéprimées ont deux fois plus de chances de mourir.
Si la personne n'a pas une maladie permanente et qu'elle a survécu à toutes les itérations nécessaires pour que la maladie passe, la personne est guérie.
Si on est immunisé après la maladie, la personne gagne ce statut, sinon elle est juste saine à nouveau.
Finalement, on enregistre les statistiques actuelles sous forme de dataframe en calculant le nombre de personnes par état.</p>
</div>


                            </div>
                </section>
    </main>
</body>
</html>